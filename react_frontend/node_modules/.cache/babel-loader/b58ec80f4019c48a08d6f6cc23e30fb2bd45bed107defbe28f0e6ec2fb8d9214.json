{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Assignments\\\\Nadil\\\\Climatrix\\\\react_frontend\\\\src\\\\pages\\\\client\\\\PredictionHistory.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport logo from \"../../assets/logo.png\"; // spinner for loading\nimport Footer from \"../../components/Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PredictionHistory = () => {\n  _s();\n  const user = JSON.parse(localStorage.getItem(\"user\")); // get logged-in user\n  const userId = user === null || user === void 0 ? void 0 : user.userId;\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({\n    type: \"\",\n    message: \"\"\n  });\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({\n        type: \"\",\n        message: \"\"\n      }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // Fetch user predictions\n  const fetchPredictions = async () => {\n    if (!userId) return;\n    setLoading(true);\n    try {\n      const res = await axios.get(`http://localhost:5001/api/predictions/user/${userId}`);\n      setPredictions(res.data);\n    } catch (err) {\n      console.error(err);\n      setAlert({\n        type: \"error\",\n        message: \"Failed to fetch prediction history\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchPredictions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-background login-background d-flex flex-column\",\n    children: [alert.message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `login-alert ${alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"}`,\n      children: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"Loading...\",\n        className: \"spinner-logo-large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-page flex-grow-1\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-glass-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-center brand-gradient mb-4\",\n          children: \"Prediction History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), predictions.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center\",\n          children: \"No predictions found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), predictions.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"prediction-card mb-3 p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [p.city, \" - \", p.parameter]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Timeframe:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this), \" \", p.timeframe, \" |\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Min/Max:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this), \" \", p.min_or_max, \" |\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Value:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this), \" \", p.predicted_value, \" |\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Risk:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this), \" \", p.disaster_risk]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: p.forecast_message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Series:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this), \" \", p.forecast_series.join(\", \")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), p.forecast_plot && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: `data:image/png;base64,${p.forecast_plot}`,\n              alt: \"Forecast Plot\",\n              style: {\n                maxWidth: \"100%\",\n                height: \"auto\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this)]\n        }, p._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(PredictionHistory, \"DPmjBR0bSbiusal+FcHx1e5i8U8=\");\n_c = PredictionHistory;\nexport default PredictionHistory;\nvar _c;\n$RefreshReg$(_c, \"PredictionHistory\");","map":{"version":3,"names":["axios","useEffect","useState","logo","Footer","jsxDEV","_jsxDEV","PredictionHistory","_s","user","JSON","parse","localStorage","getItem","userId","predictions","setPredictions","loading","setLoading","alert","setAlert","type","message","timer","setTimeout","clearTimeout","fetchPredictions","res","get","data","err","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","length","map","p","city","parameter","timeframe","min_or_max","predicted_value","disaster_risk","forecast_message","forecast_series","join","forecast_plot","style","maxWidth","height","_id","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Assignments/Nadil/Climatrix/react_frontend/src/pages/client/PredictionHistory.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport logo from \"../../assets/logo.png\"; // spinner for loading\nimport Footer from \"../../components/Footer\";\n\nconst PredictionHistory = () => {\n  const user = JSON.parse(localStorage.getItem(\"user\")); // get logged-in user\n  const userId = user?.userId;\n\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({ type: \"\", message: \"\" });\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({ type: \"\", message: \"\" }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // Fetch user predictions\n  const fetchPredictions = async () => {\n    if (!userId) return;\n    setLoading(true);\n    try {\n      const res = await axios.get(`http://localhost:5001/api/predictions/user/${userId}`);\n      setPredictions(res.data);\n    } catch (err) {\n      console.error(err);\n      setAlert({ type: \"error\", message: \"Failed to fetch prediction history\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPredictions();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId]);\n\n  return (\n    <div className=\"app-background login-background d-flex flex-column\">\n      {alert.message && (\n        <div\n          className={`login-alert ${\n            alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"\n          }`}\n        >\n          {alert.message}\n        </div>\n      )}\n\n      {loading && (\n        <div className=\"loading-overlay\">\n          <img src={logo} alt=\"Loading...\" className=\"spinner-logo-large\" />\n        </div>\n      )}\n\n      <div className=\"auth-page flex-grow-1\">\n        <div className=\"auth-glass-card\">\n          <h3 className=\"text-center brand-gradient mb-4\">Prediction History</h3>\n\n          {predictions.length === 0 && !loading && (\n            <p className=\"text-center\">No predictions found.</p>\n          )}\n\n          {predictions.map((p) => (\n            <div key={p._id} className=\"prediction-card mb-3 p-3\">\n              <h5>{p.city} - {p.parameter}</h5>\n              <p>\n                <strong>Timeframe:</strong> {p.timeframe} |{\" \"}\n                <strong>Min/Max:</strong> {p.min_or_max} |{\" \"}\n                <strong>Value:</strong> {p.predicted_value} |{\" \"}\n                <strong>Risk:</strong> {p.disaster_risk}\n              </p>\n              <p>{p.forecast_message}</p>\n              <div>\n                <strong>Series:</strong> {p.forecast_series.join(\", \")}\n              </div>\n\n              {/* Plot */}\n              {p.forecast_plot && (\n                <div className=\"mt-2 text-center\">\n                  <img\n                    src={`data:image/png;base64,${p.forecast_plot}`}\n                    alt=\"Forecast Plot\"\n                    style={{ maxWidth: \"100%\", height: \"auto\" }}\n                  />\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default PredictionHistory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}