{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Assignments\\\\Nadil\\\\Final\\\\Climatrix\\\\react_frontend\\\\src\\\\pages\\\\admin\\\\AdminPredictionHistory.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { FaChartBar, FaDownload, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\n\n// ===================\n// API setup\n// ===================\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = \"http://localhost:5001\";\nconst API_PREFIX = \"/api\";\nconst API = axios.create({\n  baseURL: API_BASE\n});\n\n// ✅ Change this if your backend endpoint is different\nconst ADMIN_PREDICTIONS_URL = `${API_PREFIX}/predictions`;\n\n// ===================\n// Image helpers (same as UserManagement)\n// ===================\nconst toRelativeImagePath = pic => {\n  if (!pic) return \"\";\n  let s = String(pic).trim();\n  s = s.replace(\"/undefined/\", \"/\").replace(\"undefined//\", \"\");\n  if (/^https?:\\/\\//i.test(s)) {\n    try {\n      s = new URL(s).pathname;\n    } catch {\n      const idx = s.indexOf(\"/image/\");\n      if (idx !== -1) s = s.slice(idx);\n    }\n  }\n  if (!s.startsWith(\"/\")) s = `/${s}`;\n  return s;\n};\nconst toImgSrcLikeNavbar = relativePath => {\n  if (!relativePath) return \"https://via.placeholder.com/52?text=User\";\n  return `/${String(relativePath).replace(/^\\/+/, \"\")}`;\n};\nconst AdminPredictionHistory = () => {\n  _s();\n  const stored = useMemo(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"user\")) || null;\n    } catch {\n      return null;\n    }\n  }, []);\n  const adminId = stored === null || stored === void 0 ? void 0 : stored.userId;\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({\n    type: \"\",\n    message: \"\"\n  });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // auto hide alert\n  useEffect(() => {\n    if (alert.message) {\n      const t = setTimeout(() => setAlert({\n        type: \"\",\n        message: \"\"\n      }), 3000);\n      return () => clearTimeout(t);\n    }\n  }, [alert]);\n\n  // ===== helpers =====\n  const prettyParam = param => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n  const formatDateTime = iso => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n  const riskClass = riskText => `risk-${String(riskText || \"\").toLowerCase().replace(/\\s+/g, \"-\")}`;\n  const getUnitByParameter = param => {\n    const p = String(param || \"\").toLowerCase();\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n    return \"\";\n  };\n  const formatPredictedValue = (value, param) => {\n    if (value === null || value === undefined || value === \"\") return \"—\";\n    const unit = getUnitByParameter(param);\n    return unit ? `${value} ${unit}` : String(value);\n  };\n\n  // ===== fetch ALL predictions (admin) =====\n  const fetchPredictions = async () => {\n    setLoading(true);\n    try {\n      var _res$data;\n      const res = await API.get(ADMIN_PREDICTIONS_URL);\n\n      // Expected: array OR { predictions: [...] }\n      const arr = Array.isArray(res.data) ? res.data : Array.isArray((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.predictions) ? res.data.predictions : [];\n\n      // ✅ normalize user profile picture if backend sends populated user object\n      const normalized = arr.map(p => {\n        const userObj = p.user || p.userInfo || p.owner || null; // tolerate different backend naming\n        const rel = toRelativeImagePath(userObj === null || userObj === void 0 ? void 0 : userObj.profilePicture);\n        return {\n          ...p,\n          _user: userObj,\n          _userRelPic: rel,\n          _userImgSrc: toImgSrcLikeNavbar(rel)\n        };\n      });\n      setPredictions(normalized);\n    } catch (err) {\n      console.error(err);\n      setAlert({\n        type: \"error\",\n        message: \"Failed to fetch admin prediction history\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchPredictions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [adminId]);\n\n  // ===== filters + sort =====\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n    const list = predictions.filter(p => {\n      var _userObj$userId, _userObj$name, _userObj$email;\n      const userObj = p._user;\n      const searchHay = `${p.city} ${p.parameter} ${p.disaster_risk} ${p.timeframe} ${p.min_or_max} ` + `${(_userObj$userId = userObj === null || userObj === void 0 ? void 0 : userObj.userId) !== null && _userObj$userId !== void 0 ? _userObj$userId : \"\"} ${(_userObj$name = userObj === null || userObj === void 0 ? void 0 : userObj.name) !== null && _userObj$name !== void 0 ? _userObj$name : \"\"} ${(_userObj$email = userObj === null || userObj === void 0 ? void 0 : userObj.email) !== null && _userObj$email !== void 0 ? _userObj$email : \"\"}`.toLowerCase();\n      const matchesSearch = !q || searchHay.includes(q);\n      const matchesTimeframe = timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n      const matchesRisk = riskFilter === \"all\" || p.disaster_risk === riskFilter;\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder]);\n\n  // ===== PDF helpers =====\n  const safeText = v => v === null || v === undefined || v === \"\" ? \"—\" : String(v);\n  const toDataUrl = imgSrc => new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0);\n      resolve(canvas.toDataURL(\"image/png\"));\n    };\n    img.onerror = reject;\n    img.src = imgSrc;\n  });\n  const downloadPredictionPDF = async p => {\n    try {\n      const userObj = p._user;\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239];\n      const accentGreen = [164, 198, 57];\n      const softWhite = [235, 235, 235];\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n      if (logoDataUrl) {\n        doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - 9, 24, 18, 18);\n      }\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, {\n        align: \"center\"\n      });\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Admin Prediction Report\", pageW / 2, 56, {\n        align: \"center\"\n      });\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 98;\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n      const rows = [[\"Client\", safeText(userObj === null || userObj === void 0 ? void 0 : userObj.name)], [\"Client Email\", safeText(userObj === null || userObj === void 0 ? void 0 : userObj.email)], [\"Client ID\", safeText(userObj === null || userObj === void 0 ? void 0 : userObj.userId)], [\"City\", safeText(p.city)], [\"Parameter\", safeText(prettyParam(p.parameter))], [\"Timeframe\", safeText(p.timeframe)], [\"Mode\", safeText(p.min_or_max)], [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))], [\"Risk\", safeText(p.disaster_risk)], [\"Date\", safeText(formatDateTime(p.createdAt))]];\n      doc.setFontSize(11);\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n        y += 8;\n      });\n      let msgY = cardY + cardH + 14;\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n      msgY += msgLines.length * 5 + 10;\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n        msgY += 6;\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\"Generated by ClimatrixSL • Admin Panel\", pageW / 2, pageH - 10, {\n        align: \"center\"\n      });\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_Admin_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\"\n      });\n    }\n  };\n\n  // plot modal\n  const openPlotModal = p => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"history-page\",\n    children: [alert.message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `login-alert ${alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"}`,\n      children: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-border text-light\",\n        role: \"status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-hero\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"history-title\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"brand-gradient\",\n            children: \"Admin Prediction History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"history-subtitle\",\n          children: \"View and export prediction records for all clients.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-controls glass-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-controls-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control glass-input history-search\",\n            placeholder: \"Search by client (name/email/id), city, parameter, or risk...\",\n            value: search,\n            onChange: e => setSearch(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: timeframeFilter,\n            onChange: e => setTimeframeFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Timeframes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"day\",\n              children: \"Day\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"week\",\n              children: \"Week\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"month\",\n              children: \"Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: riskFilter,\n            onChange: e => setRiskFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Risks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Low Risk\",\n              children: \"Low\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Moderate Risk\",\n              children: \"Moderate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"High Risk\",\n              children: \"High\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: sortOrder,\n            onChange: e => setSortOrder(e.target.value),\n            title: \"Sort\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"latest\",\n              children: \"Latest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"oldest\",\n              children: \"Oldest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-light history-refresh icon-btn\",\n            type: \"button\",\n            onClick: fetchPredictions,\n            title: \"Refresh\",\n            children: /*#__PURE__*/_jsxDEV(FaSyncAlt, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-count text-white-50\",\n          children: [\"Showing \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"text-white\",\n            children: filtered.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 21\n          }, this), \" results\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), !loading && filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-panel history-empty text-center text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"fw-bold mb-2\",\n          children: \"No predictions found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white-50 mb-0\",\n          children: \"Try changing filters or refresh.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-grid\",\n        children: filtered.map(p => {\n          var _userObj$userId2;\n          const userObj = p._user;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-card-top\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  gap: 12,\n                  alignItems: \"center\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: p._userImgSrc,\n                  alt: \"Client\",\n                  style: {\n                    width: 44,\n                    height: 44,\n                    borderRadius: 999,\n                    objectFit: \"cover\",\n                    border: \"1px solid rgba(255,255,255,0.18)\",\n                    background: \"rgba(0,0,0,0.25)\"\n                  },\n                  onError: e => {\n                    e.currentTarget.src = \"https://via.placeholder.com/44?text=User\";\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-white\",\n                    style: {\n                      fontWeight: 700\n                    },\n                    children: [(userObj === null || userObj === void 0 ? void 0 : userObj.name) || \"Unknown Client\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-white-50\",\n                      style: {\n                        fontWeight: 500\n                      },\n                      children: [\"(#\", (_userObj$userId2 = userObj === null || userObj === void 0 ? void 0 : userObj.userId) !== null && _userObj$userId2 !== void 0 ? _userObj$userId2 : \"—\", \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 481,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 479,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-white-50\",\n                    style: {\n                      fontSize: 13\n                    },\n                    children: (userObj === null || userObj === void 0 ? void 0 : userObj.email) || \"—\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 485,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `risk-pill ${riskClass(p.disaster_risk)}`,\n                children: p.disaster_risk\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"history-card-title\",\n              style: {\n                marginTop: 10\n              },\n              children: [p.city, \" \\u2022 \", prettyParam(p.parameter)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-card-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"chip\",\n                children: p.timeframe\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"chip\",\n                children: p.min_or_max\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"chip chip-strong\",\n                children: [\"Value \", formatPredictedValue(p.predicted_value, p.parameter)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"chip chip-date\",\n                children: formatDateTime(p.createdAt)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this), p.forecast_message && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"history-message\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 21\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-white-50\",\n                children: p.forecast_message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"icon-action-btn\",\n                title: \"Download PDF\",\n                type: \"button\",\n                onClick: () => downloadPredictionPDF(p),\n                children: /*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 519,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"icon-action-btn\",\n                title: \"View Plot\",\n                type: \"button\",\n                disabled: !p.forecast_plot,\n                onClick: () => openPlotModal(p),\n                children: /*#__PURE__*/_jsxDEV(FaChartBar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 528,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 17\n            }, this)]\n          }, p._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this), showPlot && selectedPrediction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-modal-overlay\",\n      onClick: closePlotModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-modal-glass\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-title\",\n              children: [selectedPrediction.city, \" \\u2022 \", prettyParam(selectedPrediction.parameter)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-sub text-white-50\",\n              children: formatDateTime(selectedPrediction.createdAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"history-modal-close\",\n            type: \"button\",\n            onClick: closePlotModal,\n            title: \"Close\",\n            children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-body\",\n          children: selectedPrediction.forecast_plot ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `data:image/png;base64,${selectedPrediction.forecast_plot}`,\n            alt: \"Forecast Plot\",\n            className: \"history-modal-plot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white-50 text-center\",\n            children: \"No plot available for this prediction.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 358,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminPredictionHistory, \"Zw6fdjgSR0jQfi47WuRQ0p5OnnU=\");\n_c = AdminPredictionHistory;\nexport default AdminPredictionHistory;\nvar _c;\n$RefreshReg$(_c, \"AdminPredictionHistory\");","map":{"version":3,"names":["axios","jsPDF","useEffect","useMemo","useState","FaChartBar","FaDownload","FaSyncAlt","FaTimes","logo","jsxDEV","_jsxDEV","API_BASE","API_PREFIX","API","create","baseURL","ADMIN_PREDICTIONS_URL","toRelativeImagePath","pic","s","String","trim","replace","test","URL","pathname","idx","indexOf","slice","startsWith","toImgSrcLikeNavbar","relativePath","AdminPredictionHistory","_s","stored","JSON","parse","localStorage","getItem","adminId","userId","predictions","setPredictions","loading","setLoading","alert","setAlert","type","message","search","setSearch","timeframeFilter","setTimeframeFilter","riskFilter","setRiskFilter","sortOrder","setSortOrder","showPlot","setShowPlot","selectedPrediction","setSelectedPrediction","t","setTimeout","clearTimeout","prettyParam","param","formatDateTime","iso","d","Date","Number","isNaN","getTime","toLocaleString","riskClass","riskText","toLowerCase","getUnitByParameter","p","includes","formatPredictedValue","value","undefined","unit","fetchPredictions","_res$data","res","get","arr","Array","isArray","data","normalized","map","userObj","user","userInfo","owner","rel","profilePicture","_user","_userRelPic","_userImgSrc","err","console","error","filtered","q","list","filter","_userObj$userId","_userObj$name","_userObj$email","searchHay","city","parameter","disaster_risk","timeframe","min_or_max","name","email","matchesSearch","matchesTimeframe","matchesRisk","sort","a","b","da","createdAt","db","safeText","v","toDataUrl","imgSrc","Promise","resolve","reject","img","Image","crossOrigin","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toDataURL","onerror","src","downloadPredictionPDF","doc","pageW","internal","pageSize","getWidth","pageH","getHeight","margin","darkBg","accentBlue","accentGreen","softWhite","setFillColor","rect","logoDataUrl","addImage","setTextColor","setFont","setFontSize","text","align","cardX","cardY","cardW","cardH","setDrawColor","setLineWidth","labelX","valueX","y","rows","predicted_value","forEach","label","msgY","forecast_message","msgLines","splitTextToSize","length","forecast_plot","imgData","plotH","addPage","safeCity","save","now","e","openPlotModal","closePlotModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","role","placeholder","onChange","target","title","onClick","_userObj$userId2","style","display","gap","alignItems","alt","borderRadius","objectFit","border","background","onError","currentTarget","fontWeight","fontSize","marginTop","disabled","_id","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Assignments/Nadil/Final/Climatrix/react_frontend/src/pages/admin/AdminPredictionHistory.js"],"sourcesContent":["import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { FaChartBar, FaDownload, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\n\n// ===================\n// API setup\n// ===================\nconst API_BASE = \"http://localhost:5001\";\nconst API_PREFIX = \"/api\";\nconst API = axios.create({ baseURL: API_BASE });\n\n// ✅ Change this if your backend endpoint is different\nconst ADMIN_PREDICTIONS_URL = `${API_PREFIX}/predictions`;\n\n// ===================\n// Image helpers (same as UserManagement)\n// ===================\nconst toRelativeImagePath = (pic) => {\n  if (!pic) return \"\";\n\n  let s = String(pic).trim();\n  s = s.replace(\"/undefined/\", \"/\").replace(\"undefined//\", \"\");\n\n  if (/^https?:\\/\\//i.test(s)) {\n    try {\n      s = new URL(s).pathname;\n    } catch {\n      const idx = s.indexOf(\"/image/\");\n      if (idx !== -1) s = s.slice(idx);\n    }\n  }\n\n  if (!s.startsWith(\"/\")) s = `/${s}`;\n  return s;\n};\n\nconst toImgSrcLikeNavbar = (relativePath) => {\n  if (!relativePath) return \"https://via.placeholder.com/52?text=User\";\n  return `/${String(relativePath).replace(/^\\/+/, \"\")}`;\n};\n\nconst AdminPredictionHistory = () => {\n  const stored = useMemo(() => {\n    try {\n      return JSON.parse(localStorage.getItem(\"user\")) || null;\n    } catch {\n      return null;\n    }\n  }, []);\n\n  const adminId = stored?.userId;\n\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({ type: \"\", message: \"\" });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // auto hide alert\n  useEffect(() => {\n    if (alert.message) {\n      const t = setTimeout(() => setAlert({ type: \"\", message: \"\" }), 3000);\n      return () => clearTimeout(t);\n    }\n  }, [alert]);\n\n  // ===== helpers =====\n  const prettyParam = (param) => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n\n  const formatDateTime = (iso) => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n\n  const riskClass = (riskText) =>\n    `risk-${String(riskText || \"\").toLowerCase().replace(/\\s+/g, \"-\")}`;\n\n  const getUnitByParameter = (param) => {\n    const p = String(param || \"\").toLowerCase();\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n    return \"\";\n  };\n\n  const formatPredictedValue = (value, param) => {\n    if (value === null || value === undefined || value === \"\") return \"—\";\n    const unit = getUnitByParameter(param);\n    return unit ? `${value} ${unit}` : String(value);\n  };\n\n  // ===== fetch ALL predictions (admin) =====\n  const fetchPredictions = async () => {\n    setLoading(true);\n    try {\n      const res = await API.get(ADMIN_PREDICTIONS_URL);\n\n      // Expected: array OR { predictions: [...] }\n      const arr = Array.isArray(res.data)\n        ? res.data\n        : Array.isArray(res.data?.predictions)\n        ? res.data.predictions\n        : [];\n\n      // ✅ normalize user profile picture if backend sends populated user object\n      const normalized = arr.map((p) => {\n        const userObj = p.user || p.userInfo || p.owner || null; // tolerate different backend naming\n        const rel = toRelativeImagePath(userObj?.profilePicture);\n        return {\n          ...p,\n          _user: userObj,\n          _userRelPic: rel,\n          _userImgSrc: toImgSrcLikeNavbar(rel),\n        };\n      });\n\n      setPredictions(normalized);\n    } catch (err) {\n      console.error(err);\n      setAlert({ type: \"error\", message: \"Failed to fetch admin prediction history\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPredictions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [adminId]);\n\n  // ===== filters + sort =====\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n\n    const list = predictions.filter((p) => {\n      const userObj = p._user;\n\n      const searchHay =\n        `${p.city} ${p.parameter} ${p.disaster_risk} ${p.timeframe} ${p.min_or_max} ` +\n        `${userObj?.userId ?? \"\"} ${userObj?.name ?? \"\"} ${userObj?.email ?? \"\"}`\n          .toLowerCase();\n\n      const matchesSearch = !q || searchHay.includes(q);\n\n      const matchesTimeframe =\n        timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n\n      const matchesRisk = riskFilter === \"all\" || p.disaster_risk === riskFilter;\n\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder]);\n\n  // ===== PDF helpers =====\n  const safeText = (v) => (v === null || v === undefined || v === \"\" ? \"—\" : String(v));\n\n  const toDataUrl = (imgSrc) =>\n    new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n      img.onload = () => {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0);\n        resolve(canvas.toDataURL(\"image/png\"));\n      };\n      img.onerror = reject;\n      img.src = imgSrc;\n    });\n\n  const downloadPredictionPDF = async (p) => {\n    try {\n      const userObj = p._user;\n\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239];\n      const accentGreen = [164, 198, 57];\n      const softWhite = [235, 235, 235];\n\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n\n      if (logoDataUrl) {\n        doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - 9, 24, 18, 18);\n      }\n\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, { align: \"center\" });\n\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Admin Prediction Report\", pageW / 2, 56, { align: \"center\" });\n\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 98;\n\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n\n      const rows = [\n        [\"Client\", safeText(userObj?.name)],\n        [\"Client Email\", safeText(userObj?.email)],\n        [\"Client ID\", safeText(userObj?.userId)],\n        [\"City\", safeText(p.city)],\n        [\"Parameter\", safeText(prettyParam(p.parameter))],\n        [\"Timeframe\", safeText(p.timeframe)],\n        [\"Mode\", safeText(p.min_or_max)],\n        [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))],\n        [\"Risk\", safeText(p.disaster_risk)],\n        [\"Date\", safeText(formatDateTime(p.createdAt))],\n      ];\n\n      doc.setFontSize(11);\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n\n        y += 8;\n      });\n\n      let msgY = cardY + cardH + 14;\n\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n\n      msgY += msgLines.length * 5 + 10;\n\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n\n        msgY += 6;\n\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\"Generated by ClimatrixSL • Admin Panel\", pageW / 2, pageH - 10, {\n        align: \"center\",\n      });\n\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_Admin_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\",\n      });\n    }\n  };\n\n  // plot modal\n  const openPlotModal = (p) => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n\n  return (\n    <div className=\"history-page\">\n      {/* Alert UI */}\n      {alert.message && (\n        <div\n          className={`login-alert ${\n            alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"\n          }`}\n        >\n          {alert.message}\n        </div>\n      )}\n\n      {/* Loading overlay */}\n      {loading && (\n        <div className=\"loading-overlay\">\n          <div className=\"spinner-border text-light\" role=\"status\" />\n        </div>\n      )}\n\n      <div className=\"history-container\">\n        {/* Header */}\n        <div className=\"history-hero\">\n          <h1 className=\"history-title\">\n            <span className=\"brand-gradient\">Admin Prediction History</span>\n          </h1>\n          <p className=\"history-subtitle\">\n            View and export prediction records for all clients.\n          </p>\n        </div>\n\n        {/* Controls */}\n        <div className=\"history-controls glass-panel\">\n          <div className=\"history-controls-row\">\n            <input\n              className=\"form-control glass-input history-search\"\n              placeholder=\"Search by client (name/email/id), city, parameter, or risk...\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n            />\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={timeframeFilter}\n              onChange={(e) => setTimeframeFilter(e.target.value)}\n            >\n              <option value=\"all\">All Timeframes</option>\n              <option value=\"day\">Day</option>\n              <option value=\"week\">Week</option>\n              <option value=\"month\">Month</option>\n            </select>\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={riskFilter}\n              onChange={(e) => setRiskFilter(e.target.value)}\n            >\n              <option value=\"all\">All Risks</option>\n              <option value=\"Low Risk\">Low</option>\n              <option value=\"Moderate Risk\">Moderate</option>\n              <option value=\"High Risk\">High</option>\n            </select>\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={sortOrder}\n              onChange={(e) => setSortOrder(e.target.value)}\n              title=\"Sort\"\n            >\n              <option value=\"latest\">Latest</option>\n              <option value=\"oldest\">Oldest</option>\n            </select>\n\n            <button\n              className=\"btn btn-outline-light history-refresh icon-btn\"\n              type=\"button\"\n              onClick={fetchPredictions}\n              title=\"Refresh\"\n            >\n              <FaSyncAlt />\n            </button>\n          </div>\n\n          <div className=\"history-count text-white-50\">\n            Showing <strong className=\"text-white\">{filtered.length}</strong> results\n          </div>\n        </div>\n\n        {/* Empty state */}\n        {!loading && filtered.length === 0 && (\n          <div className=\"glass-panel history-empty text-center text-white\">\n            <h5 className=\"fw-bold mb-2\">No predictions found</h5>\n            <p className=\"text-white-50 mb-0\">Try changing filters or refresh.</p>\n          </div>\n        )}\n\n        {/* Cards */}\n        <div className=\"history-grid\">\n          {filtered.map((p) => {\n            const userObj = p._user;\n            return (\n              <div key={p._id} className=\"history-card\">\n                <div className=\"history-card-top\">\n                  <div style={{ display: \"flex\", gap: 12, alignItems: \"center\" }}>\n                    {/* ✅ User picture */}\n                    <img\n                      src={p._userImgSrc}\n                      alt=\"Client\"\n                      style={{\n                        width: 44,\n                        height: 44,\n                        borderRadius: 999,\n                        objectFit: \"cover\",\n                        border: \"1px solid rgba(255,255,255,0.18)\",\n                        background: \"rgba(0,0,0,0.25)\",\n                      }}\n                      onError={(e) => {\n                        e.currentTarget.src = \"https://via.placeholder.com/44?text=User\";\n                      }}\n                    />\n\n                    <div>\n                      <div className=\"text-white\" style={{ fontWeight: 700 }}>\n                        {userObj?.name || \"Unknown Client\"}{\" \"}\n                        <span className=\"text-white-50\" style={{ fontWeight: 500 }}>\n                          (#{userObj?.userId ?? \"—\"})\n                        </span>\n                      </div>\n                      <div className=\"text-white-50\" style={{ fontSize: 13 }}>\n                        {userObj?.email || \"—\"}\n                      </div>\n                    </div>\n                  </div>\n\n                  <span className={`risk-pill ${riskClass(p.disaster_risk)}`}>\n                    {p.disaster_risk}\n                  </span>\n                </div>\n\n                <h5 className=\"history-card-title\" style={{ marginTop: 10 }}>\n                  {p.city} • {prettyParam(p.parameter)}\n                </h5>\n\n                <div className=\"history-card-meta\">\n                  <span className=\"chip\">{p.timeframe}</span>\n                  <span className=\"chip\">{p.min_or_max}</span>\n\n                  <span className=\"chip chip-strong\">\n                    Value {formatPredictedValue(p.predicted_value, p.parameter)}\n                  </span>\n\n                  <span className=\"chip chip-date\">{formatDateTime(p.createdAt)}</span>\n                </div>\n\n                {p.forecast_message && (\n                  <p className=\"history-message\">\n                    <strong>Message</strong>{\" \"}\n                    <span className=\"text-white-50\">{p.forecast_message}</span>\n                  </p>\n                )}\n\n                <div className=\"history-actions\">\n                  <button\n                    className=\"icon-action-btn\"\n                    title=\"Download PDF\"\n                    type=\"button\"\n                    onClick={() => downloadPredictionPDF(p)}\n                  >\n                    <FaDownload />\n                  </button>\n\n                  <button\n                    className=\"icon-action-btn\"\n                    title=\"View Plot\"\n                    type=\"button\"\n                    disabled={!p.forecast_plot}\n                    onClick={() => openPlotModal(p)}\n                  >\n                    <FaChartBar />\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Plot modal */}\n      {showPlot && selectedPrediction && (\n        <div className=\"history-modal-overlay\" onClick={closePlotModal}>\n          <div className=\"history-modal-glass\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"history-modal-header\">\n              <div>\n                <div className=\"history-modal-title\">\n                  {selectedPrediction.city} • {prettyParam(selectedPrediction.parameter)}\n                </div>\n                <div className=\"history-modal-sub text-white-50\">\n                  {formatDateTime(selectedPrediction.createdAt)}\n                </div>\n              </div>\n\n              <button\n                className=\"history-modal-close\"\n                type=\"button\"\n                onClick={closePlotModal}\n                title=\"Close\"\n              >\n                <FaTimes />\n              </button>\n            </div>\n\n            <div className=\"history-modal-body\">\n              {selectedPrediction.forecast_plot ? (\n                <img\n                  src={`data:image/png;base64,${selectedPrediction.forecast_plot}`}\n                  alt=\"Forecast Plot\"\n                  className=\"history-modal-plot\"\n                />\n              ) : (\n                <div className=\"text-white-50 text-center\">\n                  No plot available for this prediction.\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminPredictionHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}