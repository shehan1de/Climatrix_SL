{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Assignments\\\\Nadil\\\\Final\\\\Climatrix_SL\\\\react_frontend\\\\src\\\\pages\\\\client\\\\Predictions.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useState } from \"react\";\nimport { FaDownload } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\n\n// ✅ Cities (from your dataset)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CITY_OPTIONS = [\"Athurugiriya\", \"Badulla\", \"Bentota\", \"Colombo\", \"Galle\", \"Gampaha\", \"Hambantota\", \"Hatton\", \"Jaffna\", \"Kalmunai\", \"Kalutara\", \"Kandy\", \"Kesbewa\", \"Kolonnawa\", \"Kurunegala\", \"Mabole\", \"Maharagama\", \"Mannar\", \"Matale\", \"Matara\", \"Minuwangoda\", \"Moratuwa\", \"Mount Lavinia\", \"Negombo\", \"Oruwala\", \"Pothuhera\", \"Puttalam\", \"Ratnapura\", \"Sri Jayewardenepura Kotte\", \"Trincomalee\", \"Weligama\"];\nconst API = axios.create({\n  baseURL: \"http://127.0.0.1:5000\",\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nconst ClientPredictions = () => {\n  _s();\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const userId = user === null || user === void 0 ? void 0 : user.userId;\n  const [form, setForm] = useState({\n    city: \"\",\n    parameter: \"rain_sum\",\n    timeframe: \"week\",\n    min_or_max: \"max\"\n  });\n  const [alert, setAlert] = useState({\n    type: \"\",\n    message: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({\n        type: \"\",\n        message: \"\"\n      }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // ---------- Helpers ----------\n  const prettyParam = param => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n  const formatDateTime = iso => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n  const safeText = v => {\n    if (v === null || v === undefined) return \"—\";\n    return String(v);\n  };\n\n  // ✅ Unit helpers\n  const getUnitByParameter = param => {\n    const p = String(param || \"\").toLowerCase();\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n    return \"\";\n  };\n  const formatPredictedValue = (value, param) => {\n    const unit = getUnitByParameter(param);\n    if (value === null || value === undefined) return \"—\";\n    return unit ? `${value} ${unit}` : String(value);\n  };\n  const toDataUrl = imgPath => new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0);\n      resolve(canvas.toDataURL(\"image/png\"));\n    };\n    img.onerror = reject;\n    img.src = imgPath;\n  });\n\n  // ===== Branded PDF download (no colons) =====\n  const downloadPredictionPDF = async p => {\n    try {\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      // Theme colors\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239]; // #00aeef\n      const accentGreen = [164, 198, 57]; // #a4c639\n      const softWhite = [235, 235, 235];\n\n      // Background\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n\n      // Top bar (approx gradient)\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n\n      // Logo center (optional)\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n      if (logoDataUrl) {\n        const logoW = 18;\n        const logoH = 18;\n        doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - logoW / 2, 24, logoW, logoH);\n      }\n\n      // Title\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, {\n        align: \"center\"\n      });\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Prediction Report\", pageW / 2, 56, {\n        align: \"center\"\n      });\n\n      // Glass card box\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 86;\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n\n      // Label/value layout (NO colons)\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n\n      // ✅ Predicted date/time from predictedAt\n      const predictedTime = p.predictedAt || p.createdAt;\n      const rows = [[\"City\", safeText(p.city)], [\"Parameter\", safeText(prettyParam(p.parameter))], [\"Timeframe\", safeText(p.timeframe)], [\"Mode\", safeText(p.min_or_max)], [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))], [\"Risk\", safeText(p.disaster_risk)], [\"Predicted Time\", safeText(formatDateTime(predictedTime))]];\n      doc.setFontSize(11);\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n        y += 8;\n      });\n\n      // Summary\n      let msgY = cardY + cardH + 14;\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n      msgY += msgLines.length * 5 + 10;\n\n      // Plot (optional)\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n        msgY += 6;\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n\n      // Footer\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\"Generated by ClimatrixSL • Data-driven climate insights\", pageW / 2, pageH - 10, {\n        align: \"center\"\n      });\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`Climatrix_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Check jspdf install.\"\n      });\n    }\n  };\n\n  // ---------- Predict ----------\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!userId) {\n      setAlert({\n        type: \"error\",\n        message: \"User not logged in\"\n      });\n      return;\n    }\n    setLoading(true);\n    setResult(null);\n    try {\n      const payload = {\n        ...form,\n        userId\n      };\n      const res = await API.post(\"/predict\", payload);\n\n      // ✅ attach predicted time here\n      setAlert({\n        type: \"success\",\n        message: \"Prediction generated!\"\n      });\n      setResult({\n        ...res.data,\n        predictedAt: new Date().toISOString()\n      });\n      setForm(prev => ({\n        ...prev,\n        city: \"\"\n      }));\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      const msg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || \"Failed to generate prediction\";\n      setAlert({\n        type: \"error\",\n        message: msg\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pred-page d-flex flex-column\",\n    children: [alert.message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `login-alert ${alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"}`,\n      children: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"Loading...\",\n        className: \"spinner-logo-large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pred-container flex-grow-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pred-hero text-center text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"pred-title\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"brand-gradient\",\n            children: \"Generate Prediction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pred-grid-single\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pred-glass-card text-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"fw-bold mb-3\",\n            children: \"Prediction Form\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"pred-label\",\n              children: \"City\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control glass-input glass-select mb-3\",\n              required: true,\n              value: form.city,\n              onChange: e => setForm({\n                ...form,\n                city: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                disabled: true,\n                children: \"Select a city\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 17\n              }, this), CITY_OPTIONS.map(city => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: city,\n                children: city\n              }, city, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"pred-label\",\n              children: \"Parameter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control glass-input glass-select mb-3\",\n              value: form.parameter,\n              onChange: e => setForm({\n                ...form,\n                parameter: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"rain_sum\",\n                children: \"Rainfall\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"windspeed_10m_max\",\n                children: \"Wind Speed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"windgusts_10m_max\",\n                children: \"Wind Gusts\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"pred-label\",\n              children: \"Timeframe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control glass-input glass-select mb-3\",\n              value: form.timeframe,\n              onChange: e => setForm({\n                ...form,\n                timeframe: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"day\",\n                children: \"Day\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"week\",\n                children: \"Week\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"month\",\n                children: \"Month\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"pred-label\",\n              children: \"Mode\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control glass-input glass-select mb-3\",\n              value: form.min_or_max,\n              onChange: e => setForm({\n                ...form,\n                min_or_max: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"max\",\n                children: \"Maximum\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"min\",\n                children: \"Minimum\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-green-custom w-100 py-2\",\n              type: \"submit\",\n              children: \"Generate Prediction\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pred-glass-card text-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"fw-bold mb-3\",\n            children: \"Prediction Result\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), !result ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white-50 mb-0 text-center\",\n            children: \"No result yet. Generate a prediction to see output here.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pred-result-box\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pred-result-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-label\",\n                  children: \"City\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-value\",\n                  children: result.city\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pred-result-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-label\",\n                  children: \"Parameter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-value\",\n                  children: prettyParam(result.parameter)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pred-result-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-label\",\n                  children: \"Timeframe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-value\",\n                  children: result.timeframe\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pred-result-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-label\",\n                  children: \"Mode\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-value\",\n                  children: result.min_or_max\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pred-result-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-label\",\n                  children: \"Predicted Value\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-value fw-bold\",\n                  children: formatPredictedValue(result.predicted_value, result.parameter)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 405,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pred-result-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-result-label\",\n                  children: \"Risk\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"pred-risk-chip\",\n                  children: result.disaster_risk\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 19\n              }, this), result.forecast_message && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pred-message mt-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Message\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white-50\",\n                  children: result.forecast_message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-outline-light w-100 mt-3\",\n              onClick: () => downloadPredictionPDF(result),\n              children: [/*#__PURE__*/_jsxDEV(FaDownload, {\n                className: \"me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 19\n              }, this), \"Download PDF Report\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this), result.forecast_plot && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3 text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `data:image/png;base64,${result.forecast_plot}`,\n                alt: \"Forecast Plot\",\n                className: \"pred-plot-img\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 294,\n    columnNumber: 5\n  }, this);\n};\n_s(ClientPredictions, \"mdaFV6h3hcwQ0Y+3dzDnxrNseMY=\");\n_c = ClientPredictions;\nexport default ClientPredictions;\nvar _c;\n$RefreshReg$(_c, \"ClientPredictions\");","map":{"version":3,"names":["axios","jsPDF","useEffect","useState","FaDownload","logo","Footer","jsxDEV","_jsxDEV","Fragment","_Fragment","CITY_OPTIONS","API","create","baseURL","headers","ClientPredictions","_s","user","JSON","parse","localStorage","getItem","userId","form","setForm","city","parameter","timeframe","min_or_max","alert","setAlert","type","message","loading","setLoading","result","setResult","timer","setTimeout","clearTimeout","prettyParam","param","formatDateTime","iso","d","Date","Number","isNaN","getTime","toLocaleString","safeText","v","undefined","String","getUnitByParameter","p","toLowerCase","includes","formatPredictedValue","value","unit","toDataUrl","imgPath","Promise","resolve","reject","img","Image","crossOrigin","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toDataURL","onerror","src","downloadPredictionPDF","doc","pageW","internal","pageSize","getWidth","pageH","getHeight","margin","darkBg","accentBlue","accentGreen","softWhite","setFillColor","rect","logoDataUrl","logoW","logoH","addImage","setTextColor","setFont","setFontSize","text","align","cardX","cardY","cardW","cardH","setDrawColor","setLineWidth","labelX","valueX","y","predictedTime","predictedAt","createdAt","rows","predicted_value","disaster_risk","forEach","label","msgY","forecast_message","msgLines","splitTextToSize","length","forecast_plot","imgData","plotH","addPage","safeCity","replace","save","now","e","console","error","handleSubmit","preventDefault","payload","res","post","data","toISOString","prev","err","_err$response","_err$response$data","msg","response","className","children","fileName","_jsxFileName","lineNumber","columnNumber","alt","onSubmit","required","onChange","target","disabled","map","onClick","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Assignments/Nadil/Final/Climatrix_SL/react_frontend/src/pages/client/Predictions.js"],"sourcesContent":["import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useState } from \"react\";\nimport { FaDownload } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\n\n// ✅ Cities (from your dataset)\nconst CITY_OPTIONS = [\n  \"Athurugiriya\",\"Badulla\",\"Bentota\",\"Colombo\",\"Galle\",\"Gampaha\",\n  \"Hambantota\",\"Hatton\",\"Jaffna\",\"Kalmunai\",\"Kalutara\",\"Kandy\",\n  \"Kesbewa\",\"Kolonnawa\",\"Kurunegala\",\"Mabole\",\"Maharagama\",\n  \"Mannar\",\"Matale\",\"Matara\",\"Minuwangoda\",\"Moratuwa\",\n  \"Mount Lavinia\",\"Negombo\",\"Oruwala\",\"Pothuhera\",\n  \"Puttalam\",\"Ratnapura\",\"Sri Jayewardenepura Kotte\",\n  \"Trincomalee\",\"Weligama\"\n];\n\nconst API = axios.create({\n  baseURL: \"http://127.0.0.1:5000\",\n  headers: { \"Content-Type\": \"application/json\" }\n});\n\nconst ClientPredictions = () => {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const userId = user?.userId;\n\n  const [form, setForm] = useState({\n    city: \"\",\n    parameter: \"rain_sum\",\n    timeframe: \"week\",\n    min_or_max: \"max\"\n  });\n\n  const [alert, setAlert] = useState({ type: \"\", message: \"\" });\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({ type: \"\", message: \"\" }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // ---------- Helpers ----------\n  const prettyParam = (param) => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n\n  const formatDateTime = (iso) => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n\n  const safeText = (v) => {\n    if (v === null || v === undefined) return \"—\";\n    return String(v);\n  };\n\n  // ✅ Unit helpers\n  const getUnitByParameter = (param) => {\n    const p = String(param || \"\").toLowerCase();\n\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n\n    return \"\";\n  };\n\n  const formatPredictedValue = (value, param) => {\n    const unit = getUnitByParameter(param);\n    if (value === null || value === undefined) return \"—\";\n    return unit ? `${value} ${unit}` : String(value);\n  };\n\n  const toDataUrl = (imgPath) =>\n    new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n      img.onload = () => {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0);\n        resolve(canvas.toDataURL(\"image/png\"));\n      };\n      img.onerror = reject;\n      img.src = imgPath;\n    });\n\n  // ===== Branded PDF download (no colons) =====\n  const downloadPredictionPDF = async (p) => {\n    try {\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      // Theme colors\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239];   // #00aeef\n      const accentGreen = [164, 198, 57]; // #a4c639\n      const softWhite = [235, 235, 235];\n\n      // Background\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n\n      // Top bar (approx gradient)\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n\n      // Logo center (optional)\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n\n      if (logoDataUrl) {\n        const logoW = 18;\n        const logoH = 18;\n        doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - logoW / 2, 24, logoW, logoH);\n      }\n\n      // Title\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, { align: \"center\" });\n\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Prediction Report\", pageW / 2, 56, { align: \"center\" });\n\n      // Glass card box\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 86;\n\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n\n      // Label/value layout (NO colons)\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n\n      // ✅ Predicted date/time from predictedAt\n      const predictedTime = p.predictedAt || p.createdAt;\n\n      const rows = [\n        [\"City\", safeText(p.city)],\n        [\"Parameter\", safeText(prettyParam(p.parameter))],\n        [\"Timeframe\", safeText(p.timeframe)],\n        [\"Mode\", safeText(p.min_or_max)],\n        [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))],\n        [\"Risk\", safeText(p.disaster_risk)],\n        [\"Predicted Time\", safeText(formatDateTime(predictedTime))]\n      ];\n\n      doc.setFontSize(11);\n\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n\n        y += 8;\n      });\n\n      // Summary\n      let msgY = cardY + cardH + 14;\n\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n\n      msgY += msgLines.length * 5 + 10;\n\n      // Plot (optional)\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n\n        msgY += 6;\n\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n\n      // Footer\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\n        \"Generated by ClimatrixSL • Data-driven climate insights\",\n        pageW / 2,\n        pageH - 10,\n        { align: \"center\" }\n      );\n\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`Climatrix_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({ type: \"error\", message: \"PDF download failed. Check jspdf install.\" });\n    }\n  };\n\n  // ---------- Predict ----------\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!userId) {\n      setAlert({ type: \"error\", message: \"User not logged in\" });\n      return;\n    }\n\n    setLoading(true);\n    setResult(null);\n\n    try {\n      const payload = { ...form, userId };\n      const res = await API.post(\"/predict\", payload);\n\n      // ✅ attach predicted time here\n      setAlert({ type: \"success\", message: \"Prediction generated!\" });\n      setResult({\n        ...res.data,\n        predictedAt: new Date().toISOString()\n      });\n\n      setForm((prev) => ({ ...prev, city: \"\" }));\n    } catch (err) {\n      console.error(err);\n      const msg = err.response?.data?.error || \"Failed to generate prediction\";\n      setAlert({ type: \"error\", message: msg });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"pred-page d-flex flex-column\">\n      {alert.message && (\n        <div className={`login-alert ${alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"}`}>\n          {alert.message}\n        </div>\n      )}\n\n      {loading && (\n        <div className=\"loading-overlay\">\n          <img src={logo} alt=\"Loading...\" className=\"spinner-logo-large\" />\n        </div>\n      )}\n\n      <div className=\"pred-container flex-grow-1\">\n        <div className=\"pred-hero text-center text-white\">\n          <h1 className=\"pred-title\">\n            <span className=\"brand-gradient\">Generate Prediction</span>\n          </h1>\n        </div>\n\n        <div className=\"pred-grid-single\">\n          {/* FORM */}\n          <div className=\"pred-glass-card text-white\">\n            <h4 className=\"fw-bold mb-3\">Prediction Form</h4>\n\n            <form onSubmit={handleSubmit}>\n              <label className=\"pred-label\">City</label>\n              <select\n                className=\"form-control glass-input glass-select mb-3\"\n                required\n                value={form.city}\n                onChange={(e) => setForm({ ...form, city: e.target.value })}\n              >\n                <option value=\"\" disabled>Select a city</option>\n                {CITY_OPTIONS.map((city) => (\n                  <option key={city} value={city}>{city}</option>\n                ))}\n              </select>\n\n              <label className=\"pred-label\">Parameter</label>\n              <select\n                className=\"form-control glass-input glass-select mb-3\"\n                value={form.parameter}\n                onChange={(e) => setForm({ ...form, parameter: e.target.value })}\n              >\n                <option value=\"rain_sum\">Rainfall</option>\n                <option value=\"windspeed_10m_max\">Wind Speed</option>\n                <option value=\"windgusts_10m_max\">Wind Gusts</option>\n              </select>\n\n              <label className=\"pred-label\">Timeframe</label>\n              <select\n                className=\"form-control glass-input glass-select mb-3\"\n                value={form.timeframe}\n                onChange={(e) => setForm({ ...form, timeframe: e.target.value })}\n              >\n                <option value=\"day\">Day</option>\n                <option value=\"week\">Week</option>\n                <option value=\"month\">Month</option>\n              </select>\n\n              <label className=\"pred-label\">Mode</label>\n              <select\n                className=\"form-control glass-input glass-select mb-3\"\n                value={form.min_or_max}\n                onChange={(e) => setForm({ ...form, min_or_max: e.target.value })}\n              >\n                <option value=\"max\">Maximum</option>\n                <option value=\"min\">Minimum</option>\n              </select>\n\n              <button className=\"btn btn-green-custom w-100 py-2\" type=\"submit\">\n                Generate Prediction\n              </button>\n            </form>\n          </div>\n\n          {/* RESULT */}\n          <div className=\"pred-glass-card text-white\">\n            <h4 className=\"fw-bold mb-3\">Prediction Result</h4>\n\n            {!result ? (\n              <p className=\"text-white-50 mb-0 text-center\">\n                No result yet. Generate a prediction to see output here.\n              </p>\n            ) : (\n              <>\n                <div className=\"pred-result-box\">\n                  <div className=\"pred-result-row\">\n                    <span className=\"pred-result-label\">City</span>\n                    <span className=\"pred-result-value\">{result.city}</span>\n                  </div>\n\n                  <div className=\"pred-result-row\">\n                    <span className=\"pred-result-label\">Parameter</span>\n                    <span className=\"pred-result-value\">{prettyParam(result.parameter)}</span>\n                  </div>\n\n                  <div className=\"pred-result-row\">\n                    <span className=\"pred-result-label\">Timeframe</span>\n                    <span className=\"pred-result-value\">{result.timeframe}</span>\n                  </div>\n\n                  <div className=\"pred-result-row\">\n                    <span className=\"pred-result-label\">Mode</span>\n                    <span className=\"pred-result-value\">{result.min_or_max}</span>\n                  </div>\n\n                  {/* ✅ Value + Unit */}\n                  <div className=\"pred-result-row\">\n                    <span className=\"pred-result-label\">Predicted Value</span>\n                    <span className=\"pred-result-value fw-bold\">\n                      {formatPredictedValue(result.predicted_value, result.parameter)}\n                    </span>\n                  </div>\n\n                  <div className=\"pred-result-row\">\n                    <span className=\"pred-result-label\">Risk</span>\n                    <span className=\"pred-risk-chip\">{result.disaster_risk}</span>\n                  </div>\n\n                  {result.forecast_message && (\n                    <div className=\"pred-message mt-3\">\n                      <strong>Message</strong>\n                      <div className=\"text-white-50\">{result.forecast_message}</div>\n                    </div>\n                  )}\n                </div>\n\n                {/* ✅ PDF button */}\n                <button\n                  type=\"button\"\n                  className=\"btn btn-outline-light w-100 mt-3\"\n                  onClick={() => downloadPredictionPDF(result)}\n                >\n                  <FaDownload className=\"me-2\" />\n                  Download PDF Report\n                </button>\n\n                {/* ✅ Plot under PDF button */}\n                {result.forecast_plot && (\n                  <div className=\"mt-3 text-center\">\n                    <img\n                      src={`data:image/png;base64,${result.forecast_plot}`}\n                      alt=\"Forecast Plot\"\n                      className=\"pred-plot-img\"\n                    />\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default ClientPredictions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}