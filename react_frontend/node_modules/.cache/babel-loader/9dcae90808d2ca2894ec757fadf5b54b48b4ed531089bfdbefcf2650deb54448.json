{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Assignments\\\\Nadil\\\\Final\\\\Climatrix\\\\react_frontend\\\\src\\\\pages\\\\client\\\\PredictionHistory.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\nimport { FaDownload, FaChartBar, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport jsPDF from \"jspdf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PredictionHistory = () => {\n  _s();\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const userId = user === null || user === void 0 ? void 0 : user.userId;\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({\n    type: \"\",\n    message: \"\"\n  });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n\n  // sort filter\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({\n        type: \"\",\n        message: \"\"\n      }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // Fetch user predictions\n  const fetchPredictions = async () => {\n    if (!userId) return;\n    setLoading(true);\n    try {\n      const res = await axios.get(`http://localhost:5001/api/predictions/user/${userId}`);\n      setPredictions(res.data || []);\n    } catch (err) {\n      console.error(err);\n      setAlert({\n        type: \"error\",\n        message: \"Failed to fetch prediction history\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchPredictions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId]);\n\n  // helper: pretty labels\n  const prettyParam = param => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n  const formatDateTime = iso => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n  const riskClass = riskText => `risk-${String(riskText || \"\").toLowerCase().replace(/\\s+/g, \"-\")}`;\n\n  // Filter + sort list\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n    const list = predictions.filter(p => {\n      const matchesSearch = !q || `${p.city} ${p.parameter} ${p.disaster_risk}`.toLowerCase().includes(q);\n      const matchesTimeframe = timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n      const matchesRisk = riskFilter === \"all\" || p.disaster_risk === riskFilter;\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder]);\n\n  // ===== PDF helpers =====\n  const safeText = v => v === null || v === undefined || v === \"\" ? \"—\" : String(v);\n  const toDataUrl = imgSrc => new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0);\n      resolve(canvas.toDataURL(\"image/png\"));\n    };\n    img.onerror = reject;\n    img.src = imgSrc;\n  });\n\n  // ===== Branded PDF download (no colons) =====\n  const downloadPredictionPDF = async p => {\n    try {\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      // Theme colors\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239]; // #00aeef\n      const accentGreen = [164, 198, 57]; // #a4c639\n      const softWhite = [235, 235, 235];\n\n      // Background\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n\n      // Top bar (approx gradient)\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n\n      // Logo center (optional)\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n      if (logoDataUrl) {\n        const logoW = 18;\n        const logoH = 18;\n        doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - logoW / 2, 24, logoW, logoH);\n      }\n\n      // Title\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, {\n        align: \"center\"\n      });\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Prediction Report\", pageW / 2, 56, {\n        align: \"center\"\n      });\n\n      // Glass card box\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 86;\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n\n      // Label/value layout (NO colons)\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n      const rows = [[\"City\", safeText(p.city)], [\"Parameter\", safeText(prettyParam(p.parameter))], [\"Timeframe\", safeText(p.timeframe)], [\"Mode\", safeText(p.min_or_max)], [\"Value\", safeText(p.predicted_value)], [\"Risk\", safeText(p.disaster_risk)], [\"Date\", safeText(formatDateTime(p.createdAt))]];\n      doc.setFontSize(11);\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n        y += 8;\n      });\n\n      // Summary\n      let msgY = cardY + cardH + 14;\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n      msgY += msgLines.length * 5 + 10;\n\n      // Plot (optional)\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n        msgY += 6;\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n\n      // Footer\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\"Generated by ClimatrixSL • Data-driven climate insights\", pageW / 2, pageH - 10, {\n        align: \"center\"\n      });\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\"\n      });\n    }\n  };\n\n  // Plot modal open/close\n  const openPlotModal = p => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"history-page d-flex flex-column\",\n    children: [alert.message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `login-alert ${alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"}`,\n      children: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"Loading...\",\n        className: \"spinner-logo-large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-container flex-grow-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-hero\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"history-title\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"brand-gradient\",\n            children: \"Prediction History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-controls glass-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-controls-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control glass-input history-search\",\n            placeholder: \"Search by city, parameter, or risk...\",\n            value: search,\n            onChange: e => setSearch(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: timeframeFilter,\n            onChange: e => setTimeframeFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Timeframes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"day\",\n              children: \"Day\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"week\",\n              children: \"Week\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"month\",\n              children: \"Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: riskFilter,\n            onChange: e => setRiskFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Risks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Low Risk\",\n              children: \"Low\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Moderate Risk\",\n              children: \"Moderate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"High Risk\",\n              children: \"High\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: sortOrder,\n            onChange: e => setSortOrder(e.target.value),\n            title: \"Sort\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"latest\",\n              children: \"Latest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"oldest\",\n              children: \"Oldest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-light history-refresh icon-btn\",\n            type: \"button\",\n            onClick: fetchPredictions,\n            title: \"Refresh\",\n            children: /*#__PURE__*/_jsxDEV(FaSyncAlt, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-count text-white-50\",\n          children: [\"Showing \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"text-white\",\n            children: filtered.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 21\n          }, this), \" \", \"results\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), !loading && filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-panel history-empty text-center text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"fw-bold mb-2\",\n          children: \"No predictions found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white-50 mb-0\",\n          children: \"Try changing filters or generate a new prediction.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-grid\",\n        children: filtered.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-card-top\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"history-card-title\",\n                children: [p.city, \" \\u2022 \", prettyParam(p.parameter)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"history-card-meta\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip\",\n                  children: p.timeframe\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip\",\n                  children: p.min_or_max\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip chip-strong\",\n                  children: [\"Value \", p.predicted_value]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip chip-date\",\n                  children: formatDateTime(p.createdAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `risk-pill ${riskClass(p.disaster_risk)}`,\n              children: p.disaster_risk\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 15\n          }, this), p.forecast_message && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"history-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 19\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-white-50\",\n              children: p.forecast_message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"icon-action-btn\",\n              title: \"Download PDF\",\n              type: \"button\",\n              onClick: () => downloadPredictionPDF(p),\n              children: /*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"icon-action-btn\",\n              title: \"View Plot\",\n              type: \"button\",\n              disabled: !p.forecast_plot,\n              onClick: () => openPlotModal(p),\n              children: /*#__PURE__*/_jsxDEV(FaChartBar, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 15\n          }, this)]\n        }, p._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this), showPlot && selectedPrediction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-modal-overlay\",\n      onClick: closePlotModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-modal-glass\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-title\",\n              children: [selectedPrediction.city, \" \\u2022\", \" \", prettyParam(selectedPrediction.parameter)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-sub text-white-50\",\n              children: formatDateTime(selectedPrediction.createdAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"history-modal-close\",\n            type: \"button\",\n            onClick: closePlotModal,\n            title: \"Close\",\n            children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-body\",\n          children: selectedPrediction.forecast_plot ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `data:image/png;base64,${selectedPrediction.forecast_plot}`,\n            alt: \"Forecast Plot\",\n            className: \"history-modal-plot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white-50 text-center\",\n            children: \"No plot available for this prediction.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 299,\n    columnNumber: 5\n  }, this);\n};\n_s(PredictionHistory, \"l5kBTNihzLx+R/ShtdHaWkmG1ec=\");\n_c = PredictionHistory;\nexport default PredictionHistory;\nvar _c;\n$RefreshReg$(_c, \"PredictionHistory\");","map":{"version":3,"names":["axios","useEffect","useMemo","useState","logo","Footer","FaDownload","FaChartBar","FaSyncAlt","FaTimes","jsPDF","jsxDEV","_jsxDEV","PredictionHistory","_s","user","JSON","parse","localStorage","getItem","userId","predictions","setPredictions","loading","setLoading","alert","setAlert","type","message","search","setSearch","timeframeFilter","setTimeframeFilter","riskFilter","setRiskFilter","sortOrder","setSortOrder","showPlot","setShowPlot","selectedPrediction","setSelectedPrediction","timer","setTimeout","clearTimeout","fetchPredictions","res","get","data","err","console","error","prettyParam","param","formatDateTime","iso","d","Date","Number","isNaN","getTime","toLocaleString","riskClass","riskText","String","toLowerCase","replace","filtered","q","trim","list","filter","p","matchesSearch","city","parameter","disaster_risk","includes","matchesTimeframe","timeframe","matchesRisk","sort","a","b","da","createdAt","db","safeText","v","undefined","toDataUrl","imgSrc","Promise","resolve","reject","img","Image","crossOrigin","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toDataURL","onerror","src","downloadPredictionPDF","doc","pageW","internal","pageSize","getWidth","pageH","getHeight","margin","darkBg","accentBlue","accentGreen","softWhite","setFillColor","rect","logoDataUrl","logoW","logoH","addImage","setTextColor","setFont","setFontSize","text","align","cardX","cardY","cardW","cardH","setDrawColor","setLineWidth","labelX","valueX","y","rows","min_or_max","predicted_value","forEach","label","value","msgY","forecast_message","msgLines","splitTextToSize","length","forecast_plot","imgData","plotH","addPage","safeCity","save","now","e","openPlotModal","closePlotModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","alt","placeholder","onChange","target","title","onClick","map","disabled","_id","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Assignments/Nadil/Final/Climatrix/react_frontend/src/pages/client/PredictionHistory.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\nimport { FaDownload, FaChartBar, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport jsPDF from \"jspdf\";\n\nconst PredictionHistory = () => {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const userId = user?.userId;\n\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({ type: \"\", message: \"\" });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n\n  // sort filter\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({ type: \"\", message: \"\" }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // Fetch user predictions\n  const fetchPredictions = async () => {\n    if (!userId) return;\n    setLoading(true);\n\n    try {\n      const res = await axios.get(\n        `http://localhost:5001/api/predictions/user/${userId}`\n      );\n      setPredictions(res.data || []);\n    } catch (err) {\n      console.error(err);\n      setAlert({ type: \"error\", message: \"Failed to fetch prediction history\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPredictions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId]);\n\n  // helper: pretty labels\n  const prettyParam = (param) => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n\n  const formatDateTime = (iso) => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n\n  const riskClass = (riskText) =>\n    `risk-${String(riskText || \"\")\n      .toLowerCase()\n      .replace(/\\s+/g, \"-\")}`;\n\n  // Filter + sort list\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n\n    const list = predictions.filter((p) => {\n      const matchesSearch =\n        !q ||\n        `${p.city} ${p.parameter} ${p.disaster_risk}`\n          .toLowerCase()\n          .includes(q);\n\n      const matchesTimeframe =\n        timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n\n      const matchesRisk =\n        riskFilter === \"all\" || p.disaster_risk === riskFilter;\n\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder]);\n\n  // ===== PDF helpers =====\n  const safeText = (v) => (v === null || v === undefined || v === \"\" ? \"—\" : String(v));\n\n  const toDataUrl = (imgSrc) =>\n    new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n      img.onload = () => {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0);\n        resolve(canvas.toDataURL(\"image/png\"));\n      };\n      img.onerror = reject;\n      img.src = imgSrc;\n    });\n\n  // ===== Branded PDF download (no colons) =====\n  const downloadPredictionPDF = async (p) => {\n    try {\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      // Theme colors\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239];   // #00aeef\n      const accentGreen = [164, 198, 57]; // #a4c639\n      const softWhite = [235, 235, 235];\n\n      // Background\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n\n      // Top bar (approx gradient)\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n\n      // Logo center (optional)\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n\n      if (logoDataUrl) {\n        const logoW = 18;\n        const logoH = 18;\n        doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - logoW / 2, 24, logoW, logoH);\n      }\n\n      // Title\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, { align: \"center\" });\n\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Prediction Report\", pageW / 2, 56, { align: \"center\" });\n\n      // Glass card box\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 86;\n\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n\n      // Label/value layout (NO colons)\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n\n      const rows = [\n        [\"City\", safeText(p.city)],\n        [\"Parameter\", safeText(prettyParam(p.parameter))],\n        [\"Timeframe\", safeText(p.timeframe)],\n        [\"Mode\", safeText(p.min_or_max)],\n        [\"Value\", safeText(p.predicted_value)],\n        [\"Risk\", safeText(p.disaster_risk)],\n        [\"Date\", safeText(formatDateTime(p.createdAt))]\n      ];\n\n      doc.setFontSize(11);\n\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n\n        y += 8;\n      });\n\n      // Summary\n      let msgY = cardY + cardH + 14;\n\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n\n      msgY += msgLines.length * 5 + 10;\n\n      // Plot (optional)\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n\n        msgY += 6;\n\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n\n      // Footer\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\n        \"Generated by ClimatrixSL • Data-driven climate insights\",\n        pageW / 2,\n        pageH - 10,\n        { align: \"center\" }\n      );\n\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\"\n      });\n    }\n  };\n\n  // Plot modal open/close\n  const openPlotModal = (p) => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n\n  return (\n    <div className=\"history-page d-flex flex-column\">\n      {/* Alerts */}\n      {alert.message && (\n        <div\n          className={`login-alert ${\n            alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"\n          }`}\n        >\n          {alert.message}\n        </div>\n      )}\n\n      {/* Loading */}\n      {loading && (\n        <div className=\"loading-overlay\">\n          <img src={logo} alt=\"Loading...\" className=\"spinner-logo-large\" />\n        </div>\n      )}\n\n      {/* Content */}\n      <div className=\"history-container flex-grow-1\">\n        {/* Header */}\n        <div className=\"history-hero\">\n          <h1 className=\"history-title\">\n            <span className=\"brand-gradient\">Prediction History</span>\n          </h1>\n        </div>\n\n        {/* Controls */}\n        <div className=\"history-controls glass-panel\">\n          <div className=\"history-controls-row\">\n            <input\n              className=\"form-control glass-input history-search\"\n              placeholder=\"Search by city, parameter, or risk...\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n            />\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={timeframeFilter}\n              onChange={(e) => setTimeframeFilter(e.target.value)}\n            >\n              <option value=\"all\">All Timeframes</option>\n              <option value=\"day\">Day</option>\n              <option value=\"week\">Week</option>\n              <option value=\"month\">Month</option>\n            </select>\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={riskFilter}\n              onChange={(e) => setRiskFilter(e.target.value)}\n            >\n              <option value=\"all\">All Risks</option>\n              <option value=\"Low Risk\">Low</option>\n              <option value=\"Moderate Risk\">Moderate</option>\n              <option value=\"High Risk\">High</option>\n            </select>\n\n            {/* Sort */}\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={sortOrder}\n              onChange={(e) => setSortOrder(e.target.value)}\n              title=\"Sort\"\n            >\n              <option value=\"latest\">Latest</option>\n              <option value=\"oldest\">Oldest</option>\n            </select>\n\n            {/* Refresh icon */}\n            <button\n              className=\"btn btn-outline-light history-refresh icon-btn\"\n              type=\"button\"\n              onClick={fetchPredictions}\n              title=\"Refresh\"\n            >\n              <FaSyncAlt />\n            </button>\n          </div>\n\n          <div className=\"history-count text-white-50\">\n            Showing <strong className=\"text-white\">{filtered.length}</strong>{\" \"}\n            results\n          </div>\n        </div>\n\n        {/* Empty state */}\n        {!loading && filtered.length === 0 && (\n          <div className=\"glass-panel history-empty text-center text-white\">\n            <h5 className=\"fw-bold mb-2\">No predictions found</h5>\n            <p className=\"text-white-50 mb-0\">\n              Try changing filters or generate a new prediction.\n            </p>\n          </div>\n        )}\n\n        {/* Cards */}\n        <div className=\"history-grid\">\n          {filtered.map((p) => (\n            <div key={p._id} className=\"history-card\">\n              <div className=\"history-card-top\">\n                <div>\n                  <h5 className=\"history-card-title\">\n                    {p.city} • {prettyParam(p.parameter)}\n                  </h5>\n\n                  <div className=\"history-card-meta\">\n                    <span className=\"chip\">{p.timeframe}</span>\n                    <span className=\"chip\">{p.min_or_max}</span>\n                    <span className=\"chip chip-strong\">\n                      Value {p.predicted_value}\n                    </span>\n                    <span className=\"chip chip-date\">\n                      {formatDateTime(p.createdAt)}\n                    </span>\n                  </div>\n                </div>\n\n                <span className={`risk-pill ${riskClass(p.disaster_risk)}`}>\n                  {p.disaster_risk}\n                </span>\n              </div>\n\n              {p.forecast_message && (\n                <p className=\"history-message\">\n                  <strong>Message</strong>{\" \"}\n                  <span className=\"text-white-50\">{p.forecast_message}</span>\n                </p>\n              )}\n\n              {/* Icon actions */}\n              <div className=\"history-actions\">\n                <button\n                  className=\"icon-action-btn\"\n                  title=\"Download PDF\"\n                  type=\"button\"\n                  onClick={() => downloadPredictionPDF(p)}\n                >\n                  <FaDownload />\n                </button>\n\n                <button\n                  className=\"icon-action-btn\"\n                  title=\"View Plot\"\n                  type=\"button\"\n                  disabled={!p.forecast_plot}\n                  onClick={() => openPlotModal(p)}\n                >\n                  <FaChartBar />\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Plot modal (glass) */}\n      {showPlot && selectedPrediction && (\n        <div className=\"history-modal-overlay\" onClick={closePlotModal}>\n          <div\n            className=\"history-modal-glass\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"history-modal-header\">\n              <div>\n                <div className=\"history-modal-title\">\n                  {selectedPrediction.city} •{\" \"}\n                  {prettyParam(selectedPrediction.parameter)}\n                </div>\n                <div className=\"history-modal-sub text-white-50\">\n                  {formatDateTime(selectedPrediction.createdAt)}\n                </div>\n              </div>\n\n              <button\n                className=\"history-modal-close\"\n                type=\"button\"\n                onClick={closePlotModal}\n                title=\"Close\"\n              >\n                <FaTimes />\n              </button>\n            </div>\n\n            <div className=\"history-modal-body\">\n              {selectedPrediction.forecast_plot ? (\n                <img\n                  src={`data:image/png;base64,${selectedPrediction.forecast_plot}`}\n                  alt=\"Forecast Plot\"\n                  className=\"history-modal-plot\"\n                />\n              ) : (\n                <div className=\"text-white-50 text-center\">\n                  No plot available for this prediction.\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default PredictionHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}