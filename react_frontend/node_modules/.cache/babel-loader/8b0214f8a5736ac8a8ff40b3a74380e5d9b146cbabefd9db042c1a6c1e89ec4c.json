{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Assignments\\\\Nadil\\\\Final\\\\Climatrix\\\\react_frontend\\\\src\\\\pages\\\\admin\\\\AdminPredictionHistory.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { FaChartBar, FaDownload, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PredictionHistory = () => {\n  _s();\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({\n    type: \"\",\n    message: \"\"\n  });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n\n  // sort filter\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({\n        type: \"\",\n        message: \"\"\n      }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // ✅ Admin fetch: ALL predictions\n  const fetchPredictions = async () => {\n    setLoading(true);\n    try {\n      var _res$data;\n      // ✅ CHANGE THIS ENDPOINT if your backend uses another admin route\n      // Option A: GET /api/predictions  -> returns all (admin-only)\n      const res = await axios.get(`http://localhost:5001/api/predictions`);\n\n      // supports: array OR { predictions: [...] }\n      const arr = Array.isArray(res.data) ? res.data : Array.isArray((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.predictions) ? res.data.predictions : [];\n      setPredictions(arr);\n    } catch (err) {\n      console.error(err);\n      setAlert({\n        type: \"error\",\n        message: \"Failed to fetch prediction history\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchPredictions();\n  }, []);\n\n  // helper: pretty labels\n  const prettyParam = param => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n  const formatDateTime = iso => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n  const riskClass = riskText => `risk-${String(riskText || \"\").toLowerCase().replace(/\\s+/g, \"-\")}`;\n\n  // ✅ Units\n  const getUnitByParameter = param => {\n    const p = String(param || \"\").toLowerCase();\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n    return \"\";\n  };\n  const formatPredictedValue = (value, param) => {\n    if (value === null || value === undefined || value === \"\") return \"—\";\n    const unit = getUnitByParameter(param);\n    return unit ? `${value} ${unit}` : String(value);\n  };\n\n  // ✅ Extract user info if backend provides it (supports different shapes)\n  const getUserInfo = p => {\n    var _ref2, _ref3, _p$userId, _ref4, _ref5, _p$userName, _ref6, _ref7, _p$userEmail;\n    // If backend sends populated object: p.user\n    if (p !== null && p !== void 0 && p.user && typeof p.user === \"object\") {\n      var _ref, _p$user$userId, _p$user$name, _p$user$email;\n      return {\n        userId: (_ref = (_p$user$userId = p.user.userId) !== null && _p$user$userId !== void 0 ? _p$user$userId : p.user._id) !== null && _ref !== void 0 ? _ref : \"—\",\n        name: (_p$user$name = p.user.name) !== null && _p$user$name !== void 0 ? _p$user$name : \"—\",\n        email: (_p$user$email = p.user.email) !== null && _p$user$email !== void 0 ? _p$user$email : \"—\"\n      };\n    }\n\n    // If backend sends flat fields:\n    return {\n      userId: (_ref2 = (_ref3 = (_p$userId = p.userId) !== null && _p$userId !== void 0 ? _p$userId : p.clientId) !== null && _ref3 !== void 0 ? _ref3 : p.ownerId) !== null && _ref2 !== void 0 ? _ref2 : \"—\",\n      name: (_ref4 = (_ref5 = (_p$userName = p.userName) !== null && _p$userName !== void 0 ? _p$userName : p.clientName) !== null && _ref5 !== void 0 ? _ref5 : p.ownerName) !== null && _ref4 !== void 0 ? _ref4 : \"—\",\n      email: (_ref6 = (_ref7 = (_p$userEmail = p.userEmail) !== null && _p$userEmail !== void 0 ? _p$userEmail : p.clientEmail) !== null && _ref7 !== void 0 ? _ref7 : p.ownerEmail) !== null && _ref6 !== void 0 ? _ref6 : \"—\"\n    };\n  };\n\n  // Filter + sort list\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n    const list = predictions.filter(p => {\n      const user = getUserInfo(p);\n      const matchesSearch = !q || `${p.city} ${p.parameter} ${p.disaster_risk} ${user.userId} ${user.name} ${user.email}`.toLowerCase().includes(q);\n      const matchesTimeframe = timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n      const matchesRisk = riskFilter === \"all\" || p.disaster_risk === riskFilter;\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder]);\n\n  // ===== PDF helpers =====\n  const safeText = v => v === null || v === undefined || v === \"\" ? \"—\" : String(v);\n  const toDataUrl = imgSrc => new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0);\n      resolve(canvas.toDataURL(\"image/png\"));\n    };\n    img.onerror = reject;\n    img.src = imgSrc;\n  });\n\n  // ===== Branded PDF download (admin includes user info) =====\n  const downloadPredictionPDF = async p => {\n    try {\n      const user = getUserInfo(p);\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      // Theme colors\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239];\n      const accentGreen = [164, 198, 57];\n      const softWhite = [235, 235, 235];\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n      if (logoDataUrl) {\n        doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - 9, 24, 18, 18);\n      }\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, {\n        align: \"center\"\n      });\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Admin Prediction Report\", pageW / 2, 56, {\n        align: \"center\"\n      });\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 96;\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n      const rows = [[\"Client\", safeText(user.name)], [\"Client Email\", safeText(user.email)], [\"Client ID\", safeText(user.userId)], [\"City\", safeText(p.city)], [\"Parameter\", safeText(prettyParam(p.parameter))], [\"Timeframe\", safeText(p.timeframe)], [\"Mode\", safeText(p.min_or_max)], [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))], [\"Risk\", safeText(p.disaster_risk)], [\"Date\", safeText(formatDateTime(p.createdAt))]];\n      doc.setFontSize(11);\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n        y += 8;\n      });\n      let msgY = cardY + cardH + 14;\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n      msgY += msgLines.length * 5 + 10;\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n        msgY += 6;\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\"Generated by ClimatrixSL • Admin Panel\", pageW / 2, pageH - 10, {\n        align: \"center\"\n      });\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_Admin_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\"\n      });\n    }\n  };\n\n  // Plot modal open/close\n  const openPlotModal = p => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"history-page d-flex flex-column\",\n    children: [alert.message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `login-alert ${alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"}`,\n      children: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"Loading...\",\n        className: \"spinner-logo-large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-container flex-grow-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-hero\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"history-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"brand-gradient\",\n            children: \"User\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), \" Management\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-controls glass-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-controls-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control glass-input history-search\",\n            placeholder: \"Search by client, city, parameter, or risk...\",\n            value: search,\n            onChange: e => setSearch(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: timeframeFilter,\n            onChange: e => setTimeframeFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Timeframes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"day\",\n              children: \"Day\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"week\",\n              children: \"Week\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"month\",\n              children: \"Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: riskFilter,\n            onChange: e => setRiskFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Risks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Low Risk\",\n              children: \"Low\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Moderate Risk\",\n              children: \"Moderate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"High Risk\",\n              children: \"High\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: sortOrder,\n            onChange: e => setSortOrder(e.target.value),\n            title: \"Sort\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"latest\",\n              children: \"Latest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"oldest\",\n              children: \"Oldest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-light history-refresh icon-btn\",\n            type: \"button\",\n            onClick: fetchPredictions,\n            title: \"Refresh\",\n            children: /*#__PURE__*/_jsxDEV(FaSyncAlt, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-count text-white-50\",\n          children: [\"Showing \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"text-white\",\n            children: filtered.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 21\n          }, this), \" \", \"results\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this), !loading && filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-panel history-empty text-center text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"fw-bold mb-2\",\n          children: \"No predictions found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white-50 mb-0\",\n          children: \"Try changing filters or refresh.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-grid\",\n        children: filtered.map(p => {\n          const user = getUserInfo(p);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-card-top\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"history-card-title\",\n                  children: [p.city, \" \\u2022 \", prettyParam(p.parameter)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white-50\",\n                  style: {\n                    fontSize: 13,\n                    marginTop: 4\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    className: \"text-white-50\",\n                    children: \"Client\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 448,\n                    columnNumber: 23\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white\",\n                    children: user.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 23\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white-50\",\n                    children: [\"(\", user.email, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 450,\n                    columnNumber: 23\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white-50\",\n                    children: [\"ID \", user.userId]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 451,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"history-card-meta\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chip\",\n                    children: p.timeframe\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 455,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chip\",\n                    children: p.min_or_max\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chip chip-strong\",\n                    children: [\"Value \", formatPredictedValue(p.predicted_value, p.parameter)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chip chip-date\",\n                    children: formatDateTime(p.createdAt)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 462,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `risk-pill ${riskClass(p.disaster_risk)}`,\n                children: p.disaster_risk\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 17\n            }, this), p.forecast_message && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"history-message\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 21\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-white-50\",\n                children: p.forecast_message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"icon-action-btn\",\n                title: \"Download PDF\",\n                type: \"button\",\n                onClick: () => downloadPredictionPDF(p),\n                children: /*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"icon-action-btn\",\n                title: \"View Plot\",\n                type: \"button\",\n                disabled: !p.forecast_plot,\n                onClick: () => openPlotModal(p),\n                children: /*#__PURE__*/_jsxDEV(FaChartBar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 17\n            }, this)]\n          }, p._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this), showPlot && selectedPrediction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-modal-overlay\",\n      onClick: closePlotModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-modal-glass\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-title\",\n              children: [selectedPrediction.city, \" \\u2022 \", prettyParam(selectedPrediction.parameter)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-sub text-white-50\",\n              children: formatDateTime(selectedPrediction.createdAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"history-modal-close\",\n            type: \"button\",\n            onClick: closePlotModal,\n            title: \"Close\",\n            children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 524,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-body\",\n          children: selectedPrediction.forecast_plot ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `data:image/png;base64,${selectedPrediction.forecast_plot}`,\n            alt: \"Forecast Plot\",\n            className: \"history-modal-plot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white-50 text-center\",\n            children: \"No plot available for this prediction.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 336,\n    columnNumber: 5\n  }, this);\n};\n_s(PredictionHistory, \"l5kBTNihzLx+R/ShtdHaWkmG1ec=\");\n_c = PredictionHistory;\nexport default PredictionHistory;\nvar _c;\n$RefreshReg$(_c, \"PredictionHistory\");","map":{"version":3,"names":["axios","jsPDF","useEffect","useMemo","useState","FaChartBar","FaDownload","FaSyncAlt","FaTimes","logo","Footer","jsxDEV","_jsxDEV","PredictionHistory","_s","predictions","setPredictions","loading","setLoading","alert","setAlert","type","message","search","setSearch","timeframeFilter","setTimeframeFilter","riskFilter","setRiskFilter","sortOrder","setSortOrder","showPlot","setShowPlot","selectedPrediction","setSelectedPrediction","timer","setTimeout","clearTimeout","fetchPredictions","_res$data","res","get","arr","Array","isArray","data","err","console","error","prettyParam","param","formatDateTime","iso","d","Date","Number","isNaN","getTime","toLocaleString","riskClass","riskText","String","toLowerCase","replace","getUnitByParameter","p","includes","formatPredictedValue","value","undefined","unit","getUserInfo","_ref2","_ref3","_p$userId","_ref4","_ref5","_p$userName","_ref6","_ref7","_p$userEmail","user","_ref","_p$user$userId","_p$user$name","_p$user$email","userId","_id","name","email","clientId","ownerId","userName","clientName","ownerName","userEmail","clientEmail","ownerEmail","filtered","q","trim","list","filter","matchesSearch","city","parameter","disaster_risk","matchesTimeframe","timeframe","matchesRisk","sort","a","b","da","createdAt","db","safeText","v","toDataUrl","imgSrc","Promise","resolve","reject","img","Image","crossOrigin","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toDataURL","onerror","src","downloadPredictionPDF","doc","pageW","internal","pageSize","getWidth","pageH","getHeight","margin","darkBg","accentBlue","accentGreen","softWhite","setFillColor","rect","logoDataUrl","addImage","setTextColor","setFont","setFontSize","text","align","cardX","cardY","cardW","cardH","setDrawColor","setLineWidth","labelX","valueX","y","rows","min_or_max","predicted_value","forEach","label","msgY","forecast_message","msgLines","splitTextToSize","length","forecast_plot","imgData","plotH","addPage","safeCity","save","now","e","openPlotModal","closePlotModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","alt","placeholder","onChange","target","title","onClick","map","style","fontSize","marginTop","disabled","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Assignments/Nadil/Final/Climatrix/react_frontend/src/pages/admin/AdminPredictionHistory.js"],"sourcesContent":["import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { FaChartBar, FaDownload, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\n\nconst PredictionHistory = () => {\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({ type: \"\", message: \"\" });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n\n  // sort filter\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({ type: \"\", message: \"\" }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // ✅ Admin fetch: ALL predictions\n  const fetchPredictions = async () => {\n    setLoading(true);\n\n    try {\n      // ✅ CHANGE THIS ENDPOINT if your backend uses another admin route\n      // Option A: GET /api/predictions  -> returns all (admin-only)\n      const res = await axios.get(`http://localhost:5001/api/predictions`);\n\n      // supports: array OR { predictions: [...] }\n      const arr = Array.isArray(res.data)\n        ? res.data\n        : Array.isArray(res.data?.predictions)\n        ? res.data.predictions\n        : [];\n\n      setPredictions(arr);\n    } catch (err) {\n      console.error(err);\n      setAlert({ type: \"error\", message: \"Failed to fetch prediction history\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPredictions();\n  }, []);\n\n  // helper: pretty labels\n  const prettyParam = (param) => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n\n  const formatDateTime = (iso) => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n\n  const riskClass = (riskText) =>\n    `risk-${String(riskText || \"\").toLowerCase().replace(/\\s+/g, \"-\")}`;\n\n  // ✅ Units\n  const getUnitByParameter = (param) => {\n    const p = String(param || \"\").toLowerCase();\n\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n\n    return \"\";\n  };\n\n  const formatPredictedValue = (value, param) => {\n    if (value === null || value === undefined || value === \"\") return \"—\";\n    const unit = getUnitByParameter(param);\n    return unit ? `${value} ${unit}` : String(value);\n  };\n\n  // ✅ Extract user info if backend provides it (supports different shapes)\n  const getUserInfo = (p) => {\n    // If backend sends populated object: p.user\n    if (p?.user && typeof p.user === \"object\") {\n      return {\n        userId: p.user.userId ?? p.user._id ?? \"—\",\n        name: p.user.name ?? \"—\",\n        email: p.user.email ?? \"—\",\n      };\n    }\n\n    // If backend sends flat fields:\n    return {\n      userId: p.userId ?? p.clientId ?? p.ownerId ?? \"—\",\n      name: p.userName ?? p.clientName ?? p.ownerName ?? \"—\",\n      email: p.userEmail ?? p.clientEmail ?? p.ownerEmail ?? \"—\",\n    };\n  };\n\n  // Filter + sort list\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n\n    const list = predictions.filter((p) => {\n      const user = getUserInfo(p);\n\n      const matchesSearch =\n        !q ||\n        `${p.city} ${p.parameter} ${p.disaster_risk} ${user.userId} ${user.name} ${user.email}`\n          .toLowerCase()\n          .includes(q);\n\n      const matchesTimeframe =\n        timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n\n      const matchesRisk =\n        riskFilter === \"all\" || p.disaster_risk === riskFilter;\n\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder]);\n\n  // ===== PDF helpers =====\n  const safeText = (v) =>\n    v === null || v === undefined || v === \"\" ? \"—\" : String(v);\n\n  const toDataUrl = (imgSrc) =>\n    new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n      img.onload = () => {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0);\n        resolve(canvas.toDataURL(\"image/png\"));\n      };\n      img.onerror = reject;\n      img.src = imgSrc;\n    });\n\n  // ===== Branded PDF download (admin includes user info) =====\n  const downloadPredictionPDF = async (p) => {\n    try {\n      const user = getUserInfo(p);\n\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      // Theme colors\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239];\n      const accentGreen = [164, 198, 57];\n      const softWhite = [235, 235, 235];\n\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n\n      if (logoDataUrl) {\n        doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - 9, 24, 18, 18);\n      }\n\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, { align: \"center\" });\n\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Admin Prediction Report\", pageW / 2, 56, { align: \"center\" });\n\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 96;\n\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n\n      const rows = [\n        [\"Client\", safeText(user.name)],\n        [\"Client Email\", safeText(user.email)],\n        [\"Client ID\", safeText(user.userId)],\n        [\"City\", safeText(p.city)],\n        [\"Parameter\", safeText(prettyParam(p.parameter))],\n        [\"Timeframe\", safeText(p.timeframe)],\n        [\"Mode\", safeText(p.min_or_max)],\n        [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))],\n        [\"Risk\", safeText(p.disaster_risk)],\n        [\"Date\", safeText(formatDateTime(p.createdAt))],\n      ];\n\n      doc.setFontSize(11);\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n\n        y += 8;\n      });\n\n      let msgY = cardY + cardH + 14;\n\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n\n      msgY += msgLines.length * 5 + 10;\n\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n\n        msgY += 6;\n\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n\n        doc.addImage(\n          imgData,\n          \"PNG\",\n          margin + 4,\n          msgY + 4,\n          pageW - margin * 2 - 8,\n          plotH - 8\n        );\n      }\n\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\"Generated by ClimatrixSL • Admin Panel\", pageW / 2, pageH - 10, {\n        align: \"center\",\n      });\n\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_Admin_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\",\n      });\n    }\n  };\n\n  // Plot modal open/close\n  const openPlotModal = (p) => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n\n  return (\n    <div className=\"history-page d-flex flex-column\">\n      {/* Alerts */}\n      {alert.message && (\n        <div\n          className={`login-alert ${\n            alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"\n          }`}\n        >\n          {alert.message}\n        </div>\n      )}\n\n      {/* Loading */}\n      {loading && (\n        <div className=\"loading-overlay\">\n          <img src={logo} alt=\"Loading...\" className=\"spinner-logo-large\" />\n        </div>\n      )}\n\n      {/* Content */}\n      <div className=\"history-container flex-grow-1\">\n        {/* Header */}\n        <div className=\"history-hero\">\n          <h1 className=\"history-title\">\n            <span className=\"brand-gradient\">User</span> Management\n          </h1>\n          \n        </div>\n\n        {/* Controls */}\n        <div className=\"history-controls glass-panel\">\n          <div className=\"history-controls-row\">\n            <input\n              className=\"form-control glass-input history-search\"\n              placeholder=\"Search by client, city, parameter, or risk...\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n            />\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={timeframeFilter}\n              onChange={(e) => setTimeframeFilter(e.target.value)}\n            >\n              <option value=\"all\">All Timeframes</option>\n              <option value=\"day\">Day</option>\n              <option value=\"week\">Week</option>\n              <option value=\"month\">Month</option>\n            </select>\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={riskFilter}\n              onChange={(e) => setRiskFilter(e.target.value)}\n            >\n              <option value=\"all\">All Risks</option>\n              <option value=\"Low Risk\">Low</option>\n              <option value=\"Moderate Risk\">Moderate</option>\n              <option value=\"High Risk\">High</option>\n            </select>\n\n            {/* Sort */}\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={sortOrder}\n              onChange={(e) => setSortOrder(e.target.value)}\n              title=\"Sort\"\n            >\n              <option value=\"latest\">Latest</option>\n              <option value=\"oldest\">Oldest</option>\n            </select>\n\n            {/* Refresh icon */}\n            <button\n              className=\"btn btn-outline-light history-refresh icon-btn\"\n              type=\"button\"\n              onClick={fetchPredictions}\n              title=\"Refresh\"\n            >\n              <FaSyncAlt />\n            </button>\n          </div>\n\n          <div className=\"history-count text-white-50\">\n            Showing <strong className=\"text-white\">{filtered.length}</strong>{\" \"}\n            results\n          </div>\n        </div>\n\n        {/* Empty state */}\n        {!loading && filtered.length === 0 && (\n          <div className=\"glass-panel history-empty text-center text-white\">\n            <h5 className=\"fw-bold mb-2\">No predictions found</h5>\n            <p className=\"text-white-50 mb-0\">Try changing filters or refresh.</p>\n          </div>\n        )}\n\n        {/* Cards */}\n        <div className=\"history-grid\">\n          {filtered.map((p) => {\n            const user = getUserInfo(p);\n\n            return (\n              <div key={p._id} className=\"history-card\">\n                <div className=\"history-card-top\">\n                  <div>\n                    <h5 className=\"history-card-title\">\n                      {p.city} • {prettyParam(p.parameter)}\n                    </h5>\n\n                    {/* ✅ Show owner info (if backend provides) */}\n                    <div className=\"text-white-50\" style={{ fontSize: 13, marginTop: 4 }}>\n                      <b className=\"text-white-50\">Client</b>{\" \"}\n                      <span className=\"text-white\">{user.name}</span>{\" \"}\n                      <span className=\"text-white-50\">({user.email})</span>{\" \"}\n                      <span className=\"text-white-50\">ID {user.userId}</span>\n                    </div>\n\n                    <div className=\"history-card-meta\">\n                      <span className=\"chip\">{p.timeframe}</span>\n                      <span className=\"chip\">{p.min_or_max}</span>\n\n                      <span className=\"chip chip-strong\">\n                        Value {formatPredictedValue(p.predicted_value, p.parameter)}\n                      </span>\n\n                      <span className=\"chip chip-date\">{formatDateTime(p.createdAt)}</span>\n                    </div>\n                  </div>\n\n                  <span className={`risk-pill ${riskClass(p.disaster_risk)}`}>\n                    {p.disaster_risk}\n                  </span>\n                </div>\n\n                {p.forecast_message && (\n                  <p className=\"history-message\">\n                    <strong>Message</strong>{\" \"}\n                    <span className=\"text-white-50\">{p.forecast_message}</span>\n                  </p>\n                )}\n\n                <div className=\"history-actions\">\n                  <button\n                    className=\"icon-action-btn\"\n                    title=\"Download PDF\"\n                    type=\"button\"\n                    onClick={() => downloadPredictionPDF(p)}\n                  >\n                    <FaDownload />\n                  </button>\n\n                  <button\n                    className=\"icon-action-btn\"\n                    title=\"View Plot\"\n                    type=\"button\"\n                    disabled={!p.forecast_plot}\n                    onClick={() => openPlotModal(p)}\n                  >\n                    <FaChartBar />\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Plot modal */}\n      {showPlot && selectedPrediction && (\n        <div className=\"history-modal-overlay\" onClick={closePlotModal}>\n          <div className=\"history-modal-glass\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"history-modal-header\">\n              <div>\n                <div className=\"history-modal-title\">\n                  {selectedPrediction.city} • {prettyParam(selectedPrediction.parameter)}\n                </div>\n                <div className=\"history-modal-sub text-white-50\">\n                  {formatDateTime(selectedPrediction.createdAt)}\n                </div>\n              </div>\n\n              <button\n                className=\"history-modal-close\"\n                type=\"button\"\n                onClick={closePlotModal}\n                title=\"Close\"\n              >\n                <FaTimes />\n              </button>\n            </div>\n\n            <div className=\"history-modal-body\">\n              {selectedPrediction.forecast_plot ? (\n                <img\n                  src={`data:image/png;base64,${selectedPrediction.forecast_plot}`}\n                  alt=\"Forecast Plot\"\n                  className=\"history-modal-plot\"\n                />\n              ) : (\n                <div className=\"text-white-50 text-center\">\n                  No plot available for this prediction.\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default PredictionHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}