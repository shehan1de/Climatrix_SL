{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Assignments\\\\Nadil\\\\Final\\\\Climatrix_SL\\\\react_frontend\\\\src\\\\pages\\\\client\\\\PredictionHistory.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { FaChartBar, FaDownload, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PredictionHistory = () => {\n  _s();\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const userId = user === null || user === void 0 ? void 0 : user.userId;\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({\n    type: \"\",\n    message: \"\"\n  });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n\n  // sort filter\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({\n        type: \"\",\n        message: \"\"\n      }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // Fetch user predictions\n  const fetchPredictions = async () => {\n    if (!userId) return;\n    setLoading(true);\n    try {\n      const res = await axios.get(`http://localhost:5001/api/predictions/user/${userId}`);\n      setPredictions(res.data || []);\n    } catch (err) {\n      console.error(err);\n      setAlert({\n        type: \"error\",\n        message: \"Failed to fetch prediction history\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchPredictions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId]);\n\n  // helper: pretty labels\n  const prettyParam = param => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param; // already friendly on backend\n  };\n  const formatDateTime = iso => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n  const riskClass = riskText => `risk-${String(riskText || \"\").toLowerCase().replace(/\\s+/g, \"-\")}`;\n\n  // ✅ Units\n  const getUnitByParameter = param => {\n    const p = String(param || \"\").toLowerCase();\n\n    // backend may store \"Rainfall\" OR \"rain_sum\"\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n\n    // wind speed / gust\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n    return \"\";\n  };\n  const formatPredictedValue = (value, param) => {\n    if (value === null || value === undefined || value === \"\") return \"—\";\n    const unit = getUnitByParameter(param);\n    return unit ? `${value} ${unit}` : String(value);\n  };\n\n  // Filter + sort list\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n    const list = predictions.filter(p => {\n      const matchesSearch = !q || `${p.city} ${p.parameter} ${p.disaster_risk}`.toLowerCase().includes(q);\n      const matchesTimeframe = timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n      const matchesRisk = riskFilter === \"all\" || p.disaster_risk === riskFilter;\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder]);\n\n  // ===== PDF helpers =====\n  const safeText = v => v === null || v === undefined || v === \"\" ? \"—\" : String(v);\n  const toDataUrl = imgSrc => new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0);\n      resolve(canvas.toDataURL(\"image/png\"));\n    };\n    img.onerror = reject;\n    img.src = imgSrc;\n  });\n\n  // ===== Branded PDF download (no colons) =====\n  const downloadPredictionPDF = async p => {\n    try {\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      // Theme colors\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239]; // #00aeef\n      const accentGreen = [164, 198, 57]; // #a4c639\n      const softWhite = [235, 235, 235];\n\n      // Background\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n\n      // Top bar (approx gradient)\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n\n      // Logo center (optional)\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n      if (logoDataUrl) {\n        const logoW = 18;\n        const logoH = 18;\n        doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - logoW / 2, 24, logoW, logoH);\n      }\n\n      // Title\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, {\n        align: \"center\"\n      });\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Prediction Report\", pageW / 2, 56, {\n        align: \"center\"\n      });\n\n      // Glass card box\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 86;\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n\n      // Label/value layout (NO colons)\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n      const rows = [[\"City\", safeText(p.city)], [\"Parameter\", safeText(prettyParam(p.parameter))], [\"Timeframe\", safeText(p.timeframe)], [\"Mode\", safeText(p.min_or_max)],\n      // ✅ Value + unit\n      [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))], [\"Risk\", safeText(p.disaster_risk)], [\"Date\", safeText(formatDateTime(p.createdAt))]];\n      doc.setFontSize(11);\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n        y += 8;\n      });\n\n      // Summary\n      let msgY = cardY + cardH + 14;\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n      msgY += msgLines.length * 5 + 10;\n\n      // Plot (optional)\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n        msgY += 6;\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n\n      // Footer\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\"Generated by ClimatrixSL • Data-driven climate insights\", pageW / 2, pageH - 10, {\n        align: \"center\"\n      });\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\"\n      });\n    }\n  };\n\n  // Plot modal open/close\n  const openPlotModal = p => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"history-page d-flex flex-column\",\n    children: [alert.message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `login-alert ${alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"}`,\n      children: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"Loading...\",\n        className: \"spinner-logo-large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-container flex-grow-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-hero\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"history-title\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"brand-gradient\",\n            children: \"Prediction History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-controls glass-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-controls-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control glass-input history-search\",\n            placeholder: \"Search by city, parameter, or risk...\",\n            value: search,\n            onChange: e => setSearch(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: timeframeFilter,\n            onChange: e => setTimeframeFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Timeframes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"day\",\n              children: \"Day\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"week\",\n              children: \"Week\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"month\",\n              children: \"Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: riskFilter,\n            onChange: e => setRiskFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Risks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Low Risk\",\n              children: \"Low\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Moderate Risk\",\n              children: \"Moderate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"High Risk\",\n              children: \"High\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: sortOrder,\n            onChange: e => setSortOrder(e.target.value),\n            title: \"Sort\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"latest\",\n              children: \"Latest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"oldest\",\n              children: \"Oldest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-light history-refresh icon-btn\",\n            type: \"button\",\n            onClick: fetchPredictions,\n            title: \"Refresh\",\n            children: /*#__PURE__*/_jsxDEV(FaSyncAlt, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-count text-white-50\",\n          children: [\"Showing \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"text-white\",\n            children: filtered.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 21\n          }, this), \" \", \"results\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this), !loading && filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-panel history-empty text-center text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"fw-bold mb-2\",\n          children: \"No predictions found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white-50 mb-0\",\n          children: \"Try changing filters or generate a new prediction.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-grid\",\n        children: filtered.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-card-top\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"history-card-title\",\n                children: [p.city, \" \\u2022 \", prettyParam(p.parameter)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"history-card-meta\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip\",\n                  children: p.timeframe\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip\",\n                  children: p.min_or_max\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip chip-strong\",\n                  children: [\"Value \", formatPredictedValue(p.predicted_value, p.parameter)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip chip-date\",\n                  children: formatDateTime(p.createdAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `risk-pill ${riskClass(p.disaster_risk)}`,\n              children: p.disaster_risk\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 15\n          }, this), p.forecast_message && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"history-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 19\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-white-50\",\n              children: p.forecast_message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"icon-action-btn\",\n              title: \"Download PDF\",\n              type: \"button\",\n              onClick: () => downloadPredictionPDF(p),\n              children: /*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"icon-action-btn\",\n              title: \"View Plot\",\n              type: \"button\",\n              disabled: !p.forecast_plot,\n              onClick: () => openPlotModal(p),\n              children: /*#__PURE__*/_jsxDEV(FaChartBar, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 15\n          }, this)]\n        }, p._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), showPlot && selectedPrediction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-modal-overlay\",\n      onClick: closePlotModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-modal-glass\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-title\",\n              children: [selectedPrediction.city, \" \\u2022\", \" \", prettyParam(selectedPrediction.parameter)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-sub text-white-50\",\n              children: formatDateTime(selectedPrediction.createdAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"history-modal-close\",\n            type: \"button\",\n            onClick: closePlotModal,\n            title: \"Close\",\n            children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-body\",\n          children: selectedPrediction.forecast_plot ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `data:image/png;base64,${selectedPrediction.forecast_plot}`,\n            alt: \"Forecast Plot\",\n            className: \"history-modal-plot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white-50 text-center\",\n            children: \"No plot available for this prediction.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 5\n  }, this);\n};\n_s(PredictionHistory, \"l5kBTNihzLx+R/ShtdHaWkmG1ec=\");\n_c = PredictionHistory;\nexport default PredictionHistory;\nvar _c;\n$RefreshReg$(_c, \"PredictionHistory\");","map":{"version":3,"names":["axios","jsPDF","useEffect","useMemo","useState","FaChartBar","FaDownload","FaSyncAlt","FaTimes","logo","Footer","jsxDEV","_jsxDEV","PredictionHistory","_s","user","JSON","parse","localStorage","getItem","userId","predictions","setPredictions","loading","setLoading","alert","setAlert","type","message","search","setSearch","timeframeFilter","setTimeframeFilter","riskFilter","setRiskFilter","sortOrder","setSortOrder","showPlot","setShowPlot","selectedPrediction","setSelectedPrediction","timer","setTimeout","clearTimeout","fetchPredictions","res","get","data","err","console","error","prettyParam","param","formatDateTime","iso","d","Date","Number","isNaN","getTime","toLocaleString","riskClass","riskText","String","toLowerCase","replace","getUnitByParameter","p","includes","formatPredictedValue","value","undefined","unit","filtered","q","trim","list","filter","matchesSearch","city","parameter","disaster_risk","matchesTimeframe","timeframe","matchesRisk","sort","a","b","da","createdAt","db","safeText","v","toDataUrl","imgSrc","Promise","resolve","reject","img","Image","crossOrigin","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toDataURL","onerror","src","downloadPredictionPDF","doc","pageW","internal","pageSize","getWidth","pageH","getHeight","margin","darkBg","accentBlue","accentGreen","softWhite","setFillColor","rect","logoDataUrl","logoW","logoH","addImage","setTextColor","setFont","setFontSize","text","align","cardX","cardY","cardW","cardH","setDrawColor","setLineWidth","labelX","valueX","y","rows","min_or_max","predicted_value","forEach","label","msgY","forecast_message","msgLines","splitTextToSize","length","forecast_plot","imgData","plotH","addPage","safeCity","save","now","e","openPlotModal","closePlotModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","alt","placeholder","onChange","target","title","onClick","map","disabled","_id","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Assignments/Nadil/Final/Climatrix_SL/react_frontend/src/pages/client/PredictionHistory.js"],"sourcesContent":["import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { FaChartBar, FaDownload, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\n\nconst PredictionHistory = () => {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const userId = user?.userId;\n\n  const [predictions, setPredictions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({ type: \"\", message: \"\" });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n\n  // sort filter\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({ type: \"\", message: \"\" }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // Fetch user predictions\n  const fetchPredictions = async () => {\n    if (!userId) return;\n    setLoading(true);\n\n    try {\n      const res = await axios.get(\n        `http://localhost:5001/api/predictions/user/${userId}`\n      );\n      setPredictions(res.data || []);\n    } catch (err) {\n      console.error(err);\n      setAlert({ type: \"error\", message: \"Failed to fetch prediction history\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchPredictions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId]);\n\n  // helper: pretty labels\n  const prettyParam = (param) => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param; // already friendly on backend\n  };\n\n  const formatDateTime = (iso) => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n\n  const riskClass = (riskText) =>\n    `risk-${String(riskText || \"\")\n      .toLowerCase()\n      .replace(/\\s+/g, \"-\")}`;\n\n  // ✅ Units\n  const getUnitByParameter = (param) => {\n    const p = String(param || \"\").toLowerCase();\n\n    // backend may store \"Rainfall\" OR \"rain_sum\"\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n\n    // wind speed / gust\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n\n    return \"\";\n  };\n\n  const formatPredictedValue = (value, param) => {\n    if (value === null || value === undefined || value === \"\") return \"—\";\n    const unit = getUnitByParameter(param);\n    return unit ? `${value} ${unit}` : String(value);\n  };\n\n  // Filter + sort list\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n\n    const list = predictions.filter((p) => {\n      const matchesSearch =\n        !q ||\n        `${p.city} ${p.parameter} ${p.disaster_risk}`\n          .toLowerCase()\n          .includes(q);\n\n      const matchesTimeframe =\n        timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n\n      const matchesRisk =\n        riskFilter === \"all\" || p.disaster_risk === riskFilter;\n\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder]);\n\n  // ===== PDF helpers =====\n  const safeText = (v) =>\n    v === null || v === undefined || v === \"\" ? \"—\" : String(v);\n\n  const toDataUrl = (imgSrc) =>\n    new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n      img.onload = () => {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0);\n        resolve(canvas.toDataURL(\"image/png\"));\n      };\n      img.onerror = reject;\n      img.src = imgSrc;\n    });\n\n  // ===== Branded PDF download (no colons) =====\n  const downloadPredictionPDF = async (p) => {\n    try {\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      // Theme colors\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239]; // #00aeef\n      const accentGreen = [164, 198, 57]; // #a4c639\n      const softWhite = [235, 235, 235];\n\n      // Background\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n\n      // Top bar (approx gradient)\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n\n      // Logo center (optional)\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n\n      if (logoDataUrl) {\n        const logoW = 18;\n        const logoH = 18;\n        doc.addImage(\n          logoDataUrl,\n          \"PNG\",\n          pageW / 2 - logoW / 2,\n          24,\n          logoW,\n          logoH\n        );\n      }\n\n      // Title\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, { align: \"center\" });\n\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Prediction Report\", pageW / 2, 56, { align: \"center\" });\n\n      // Glass card box\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 86;\n\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n\n      // Label/value layout (NO colons)\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n\n      const rows = [\n        [\"City\", safeText(p.city)],\n        [\"Parameter\", safeText(prettyParam(p.parameter))],\n        [\"Timeframe\", safeText(p.timeframe)],\n        [\"Mode\", safeText(p.min_or_max)],\n        // ✅ Value + unit\n        [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))],\n        [\"Risk\", safeText(p.disaster_risk)],\n        [\"Date\", safeText(formatDateTime(p.createdAt))]\n      ];\n\n      doc.setFontSize(11);\n\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(value, valueX, y);\n\n        y += 8;\n      });\n\n      // Summary\n      let msgY = cardY + cardH + 14;\n\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n\n      msgY += msgLines.length * 5 + 10;\n\n      // Plot (optional)\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n\n        msgY += 6;\n\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n\n        doc.addImage(\n          imgData,\n          \"PNG\",\n          margin + 4,\n          msgY + 4,\n          pageW - margin * 2 - 8,\n          plotH - 8\n        );\n      }\n\n      // Footer\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\n        \"Generated by ClimatrixSL • Data-driven climate insights\",\n        pageW / 2,\n        pageH - 10,\n        { align: \"center\" }\n      );\n\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\"\n      });\n    }\n  };\n\n  // Plot modal open/close\n  const openPlotModal = (p) => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n\n  return (\n    <div className=\"history-page d-flex flex-column\">\n      {/* Alerts */}\n      {alert.message && (\n        <div\n          className={`login-alert ${\n            alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"\n          }`}\n        >\n          {alert.message}\n        </div>\n      )}\n\n      {/* Loading */}\n      {loading && (\n        <div className=\"loading-overlay\">\n          <img src={logo} alt=\"Loading...\" className=\"spinner-logo-large\" />\n        </div>\n      )}\n\n      {/* Content */}\n      <div className=\"history-container flex-grow-1\">\n        {/* Header */}\n        <div className=\"history-hero\">\n          <h1 className=\"history-title\">\n            <span className=\"brand-gradient\">Prediction History</span>\n          </h1>\n        </div>\n\n        {/* Controls */}\n        <div className=\"history-controls glass-panel\">\n          <div className=\"history-controls-row\">\n            <input\n              className=\"form-control glass-input history-search\"\n              placeholder=\"Search by city, parameter, or risk...\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n            />\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={timeframeFilter}\n              onChange={(e) => setTimeframeFilter(e.target.value)}\n            >\n              <option value=\"all\">All Timeframes</option>\n              <option value=\"day\">Day</option>\n              <option value=\"week\">Week</option>\n              <option value=\"month\">Month</option>\n            </select>\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={riskFilter}\n              onChange={(e) => setRiskFilter(e.target.value)}\n            >\n              <option value=\"all\">All Risks</option>\n              <option value=\"Low Risk\">Low</option>\n              <option value=\"Moderate Risk\">Moderate</option>\n              <option value=\"High Risk\">High</option>\n            </select>\n\n            {/* Sort */}\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={sortOrder}\n              onChange={(e) => setSortOrder(e.target.value)}\n              title=\"Sort\"\n            >\n              <option value=\"latest\">Latest</option>\n              <option value=\"oldest\">Oldest</option>\n            </select>\n\n            {/* Refresh icon */}\n            <button\n              className=\"btn btn-outline-light history-refresh icon-btn\"\n              type=\"button\"\n              onClick={fetchPredictions}\n              title=\"Refresh\"\n            >\n              <FaSyncAlt />\n            </button>\n          </div>\n\n          <div className=\"history-count text-white-50\">\n            Showing <strong className=\"text-white\">{filtered.length}</strong>{\" \"}\n            results\n          </div>\n        </div>\n\n        {/* Empty state */}\n        {!loading && filtered.length === 0 && (\n          <div className=\"glass-panel history-empty text-center text-white\">\n            <h5 className=\"fw-bold mb-2\">No predictions found</h5>\n            <p className=\"text-white-50 mb-0\">\n              Try changing filters or generate a new prediction.\n            </p>\n          </div>\n        )}\n\n        {/* Cards */}\n        <div className=\"history-grid\">\n          {filtered.map((p) => (\n            <div key={p._id} className=\"history-card\">\n              <div className=\"history-card-top\">\n                <div>\n                  <h5 className=\"history-card-title\">\n                    {p.city} • {prettyParam(p.parameter)}\n                  </h5>\n\n                  <div className=\"history-card-meta\">\n                    <span className=\"chip\">{p.timeframe}</span>\n                    <span className=\"chip\">{p.min_or_max}</span>\n\n                    {/* ✅ Value + unit */}\n                    <span className=\"chip chip-strong\">\n                      Value {formatPredictedValue(p.predicted_value, p.parameter)}\n                    </span>\n\n                    <span className=\"chip chip-date\">\n                      {formatDateTime(p.createdAt)}\n                    </span>\n                  </div>\n                </div>\n\n                <span className={`risk-pill ${riskClass(p.disaster_risk)}`}>\n                  {p.disaster_risk}\n                </span>\n              </div>\n\n              {p.forecast_message && (\n                <p className=\"history-message\">\n                  <strong>Message</strong>{\" \"}\n                  <span className=\"text-white-50\">{p.forecast_message}</span>\n                </p>\n              )}\n\n              {/* Icon actions */}\n              <div className=\"history-actions\">\n                <button\n                  className=\"icon-action-btn\"\n                  title=\"Download PDF\"\n                  type=\"button\"\n                  onClick={() => downloadPredictionPDF(p)}\n                >\n                  <FaDownload />\n                </button>\n\n                <button\n                  className=\"icon-action-btn\"\n                  title=\"View Plot\"\n                  type=\"button\"\n                  disabled={!p.forecast_plot}\n                  onClick={() => openPlotModal(p)}\n                >\n                  <FaChartBar />\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Plot modal (glass) */}\n      {showPlot && selectedPrediction && (\n        <div className=\"history-modal-overlay\" onClick={closePlotModal}>\n          <div\n            className=\"history-modal-glass\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"history-modal-header\">\n              <div>\n                <div className=\"history-modal-title\">\n                  {selectedPrediction.city} •{\" \"}\n                  {prettyParam(selectedPrediction.parameter)}\n                </div>\n                <div className=\"history-modal-sub text-white-50\">\n                  {formatDateTime(selectedPrediction.createdAt)}\n                </div>\n              </div>\n\n              <button\n                className=\"history-modal-close\"\n                type=\"button\"\n                onClick={closePlotModal}\n                title=\"Close\"\n              >\n                <FaTimes />\n              </button>\n            </div>\n\n            <div className=\"history-modal-body\">\n              {selectedPrediction.forecast_plot ? (\n                <img\n                  src={`data:image/png;base64,${selectedPrediction.forecast_plot}`}\n                  alt=\"Forecast Plot\"\n                  className=\"history-modal-plot\"\n                />\n              ) : (\n                <div className=\"text-white-50 text-center\">\n                  No plot available for this prediction.\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default PredictionHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}