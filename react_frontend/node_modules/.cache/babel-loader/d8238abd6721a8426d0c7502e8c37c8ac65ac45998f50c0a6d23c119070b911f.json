{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\Assignments\\\\Nadil\\\\Final\\\\Climatrix_SL\\\\react_frontend\\\\src\\\\pages\\\\admin\\\\AdminPredictionHistory.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { FaChartBar, FaDownload, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = \"http://localhost:5001\";\nconst API_PREFIX = \"/api\";\nconst API = axios.create({\n  baseURL: API_BASE\n});\nconst PredictionHistory = () => {\n  _s();\n  // predictions\n  const [predictions, setPredictions] = useState([]);\n\n  // ✅ users (for mapping userId -> name/email)\n  const [users, setUsers] = useState([]);\n  const [userMap, setUserMap] = useState({}); // { [userId]: userObj }\n\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({\n    type: \"\",\n    message: \"\"\n  });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n\n  // sort filter\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({\n        type: \"\",\n        message: \"\"\n      }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // =========================\n  // Fetch users + predictions\n  // =========================\n  const fetchUsers = async () => {\n    // same endpoint used in UserManagement\n    const res = await API.get(`${API_PREFIX}/users`);\n    const arr = Array.isArray(res.data) ? res.data : [];\n    setUsers(arr);\n\n    // build map userId -> user\n    const map = {};\n    arr.forEach(u => {\n      const id = Number(u.userId);\n      if (id) map[id] = u;\n    });\n    setUserMap(map);\n  };\n  const fetchPredictions = async () => {\n    var _res$data;\n    // admin fetch all\n    const res = await API.get(`${API_PREFIX}/predictions`);\n    const arr = Array.isArray(res.data) ? res.data : Array.isArray((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.predictions) ? res.data.predictions : [];\n    setPredictions(arr);\n  };\n  const fetchAll = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([fetchUsers(), fetchPredictions()]);\n    } catch (err) {\n      console.error(err);\n      setAlert({\n        type: \"error\",\n        message: \"Failed to load prediction history\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchAll();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // =========================\n  // Helpers\n  // =========================\n  const prettyParam = param => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n  const formatDateTime = iso => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n  const riskClass = riskText => `risk-${String(riskText || \"\").toLowerCase().replace(/\\s+/g, \"-\")}`;\n  const getUnitByParameter = param => {\n    const p = String(param || \"\").toLowerCase();\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n    return \"\";\n  };\n  const formatPredictedValue = (value, param) => {\n    if (value === null || value === undefined || value === \"\") return \"—\";\n    const unit = getUnitByParameter(param);\n    return unit ? `${value} ${unit}` : String(value);\n  };\n\n  // ✅ user info from prediction.userId using the map\n  const getUserInfo = p => {\n    const id = Number(p === null || p === void 0 ? void 0 : p.userId) || Number(p === null || p === void 0 ? void 0 : p.clientId) || Number(p === null || p === void 0 ? void 0 : p.ownerId) || 0;\n    const u = userMap[id];\n    return {\n      userId: id || \"—\",\n      name: (u === null || u === void 0 ? void 0 : u.name) || \"Unknown User\",\n      email: (u === null || u === void 0 ? void 0 : u.email) || \"—\"\n    };\n  };\n\n  // =========================\n  // Filter + sort list\n  // =========================\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n    const list = predictions.filter(p => {\n      const user = getUserInfo(p);\n      const matchesSearch = !q || `${p.city} ${p.parameter} ${p.disaster_risk} ${user.userId} ${user.name} ${user.email}`.toLowerCase().includes(q);\n      const matchesTimeframe = timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n      const matchesRisk = riskFilter === \"all\" || p.disaster_risk === riskFilter;\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder, userMap]);\n\n  // =========================\n  // PDF helpers\n  // =========================\n  const safeText = v => v === null || v === undefined || v === \"\" ? \"—\" : String(v);\n  const toDataUrl = imgSrc => new Promise((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => {\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0);\n      resolve(canvas.toDataURL(\"image/png\"));\n    };\n    img.onerror = reject;\n    img.src = imgSrc;\n  });\n  const downloadPredictionPDF = async p => {\n    try {\n      const user = getUserInfo(p);\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239];\n      const accentGreen = [164, 198, 57];\n      const softWhite = [235, 235, 235];\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n      if (logoDataUrl) doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - 9, 24, 18, 18);\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, {\n        align: \"center\"\n      });\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Admin Prediction Report\", pageW / 2, 56, {\n        align: \"center\"\n      });\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 96;\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n      const rows = [[\"Client\", safeText(user.name)], [\"Client Email\", safeText(user.email)], [\"Client ID\", safeText(user.userId)], [\"City\", safeText(p.city)], [\"Parameter\", safeText(prettyParam(p.parameter))], [\"Timeframe\", safeText(p.timeframe)], [\"Mode\", safeText(p.min_or_max)], [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))], [\"Risk\", safeText(p.disaster_risk)], [\"Date\", safeText(formatDateTime(p.createdAt))]];\n      doc.setFontSize(11);\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(valueX > pageW ? value : value, valueX, y);\n        y += 8;\n      });\n      let msgY = cardY + cardH + 14;\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n      msgY += msgLines.length * 5 + 10;\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n        msgY += 6;\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\"Generated by ClimatrixSL • Admin Panel\", pageW / 2, pageH - 10, {\n        align: \"center\"\n      });\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_Admin_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\"\n      });\n    }\n  };\n\n  // Plot modal open/close\n  const openPlotModal = p => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"history-page d-flex flex-column\",\n    children: [alert.message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `login-alert ${alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"}`,\n      children: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"Loading...\",\n        className: \"spinner-logo-large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-container flex-grow-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-hero\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"history-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"brand-gradient\",\n            children: \"Prediction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), \" History\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-controls glass-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-controls-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control glass-input history-search\",\n            placeholder: \"Search by client, city, parameter, or risk...\",\n            value: search,\n            onChange: e => setSearch(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: timeframeFilter,\n            onChange: e => setTimeframeFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Timeframes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"day\",\n              children: \"Day\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"week\",\n              children: \"Week\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"month\",\n              children: \"Month\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: riskFilter,\n            onChange: e => setRiskFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Risks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Low Risk\",\n              children: \"Low\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Moderate Risk\",\n              children: \"Moderate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"High Risk\",\n              children: \"High\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"form-control glass-input glass-select history-select\",\n            value: sortOrder,\n            onChange: e => setSortOrder(e.target.value),\n            title: \"Sort\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"latest\",\n              children: \"Latest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"oldest\",\n              children: \"Oldest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-light history-refresh icon-btn\",\n            type: \"button\",\n            onClick: fetchAll,\n            title: \"Refresh\",\n            children: /*#__PURE__*/_jsxDEV(FaSyncAlt, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-count text-white-50\",\n          children: [\"Showing \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"text-white\",\n            children: filtered.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 21\n          }, this), \" results\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), !loading && filtered.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-panel history-empty text-center text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"fw-bold mb-2\",\n          children: \"No predictions found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white-50 mb-0\",\n          children: \"Try changing filters or refresh.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-grid\",\n        children: filtered.map(p => {\n          const user = getUserInfo(p);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"history-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-card-top\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"history-card-title\",\n                  children: [p.city, \" \\u2022 \", prettyParam(p.parameter)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-white-50\",\n                  style: {\n                    fontSize: 13,\n                    marginTop: 4\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                    className: \"text-white-50\",\n                    children: \"Client\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 23\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white\",\n                    children: user.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 23\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white-50\",\n                    children: [\"(\", user.email, \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 459,\n                    columnNumber: 23\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white-50\",\n                    children: [\"ID \", user.userId]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 460,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"history-card-meta\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chip\",\n                    children: p.timeframe\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 464,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chip\",\n                    children: p.min_or_max\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 465,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chip chip-strong\",\n                    children: [\"Value \", formatPredictedValue(p.predicted_value, p.parameter)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 466,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"chip chip-date\",\n                    children: formatDateTime(p.createdAt)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `risk-pill ${riskClass(p.disaster_risk)}`,\n                children: p.disaster_risk\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 17\n            }, this), p.forecast_message && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"history-message\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 21\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-white-50\",\n                children: p.forecast_message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"icon-action-btn\",\n                title: \"Download PDF\",\n                type: \"button\",\n                onClick: () => downloadPredictionPDF(p),\n                children: /*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"icon-action-btn\",\n                title: \"View Plot\",\n                type: \"button\",\n                disabled: !p.forecast_plot,\n                onClick: () => openPlotModal(p),\n                children: /*#__PURE__*/_jsxDEV(FaChartBar, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 17\n            }, this)]\n          }, p._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), showPlot && selectedPrediction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"history-modal-overlay\",\n      onClick: closePlotModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-modal-glass\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-title\",\n              children: [selectedPrediction.city, \" \\u2022 \", prettyParam(selectedPrediction.parameter)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"history-modal-sub text-white-50\",\n              children: formatDateTime(selectedPrediction.createdAt)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"history-modal-close\",\n            type: \"button\",\n            onClick: closePlotModal,\n            title: \"Close\",\n            children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-modal-body\",\n          children: selectedPrediction.forecast_plot ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `data:image/png;base64,${selectedPrediction.forecast_plot}`,\n            alt: \"Forecast Plot\",\n            className: \"history-modal-plot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white-50 text-center\",\n            children: \"No plot available for this prediction.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 543,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 351,\n    columnNumber: 5\n  }, this);\n};\n_s(PredictionHistory, \"pRYbypTf+XQFjk6dJ+pQ/9SA1PI=\");\n_c = PredictionHistory;\nexport default PredictionHistory;\nvar _c;\n$RefreshReg$(_c, \"PredictionHistory\");","map":{"version":3,"names":["axios","jsPDF","useEffect","useMemo","useState","FaChartBar","FaDownload","FaSyncAlt","FaTimes","logo","Footer","jsxDEV","_jsxDEV","API_BASE","API_PREFIX","API","create","baseURL","PredictionHistory","_s","predictions","setPredictions","users","setUsers","userMap","setUserMap","loading","setLoading","alert","setAlert","type","message","search","setSearch","timeframeFilter","setTimeframeFilter","riskFilter","setRiskFilter","sortOrder","setSortOrder","showPlot","setShowPlot","selectedPrediction","setSelectedPrediction","timer","setTimeout","clearTimeout","fetchUsers","res","get","arr","Array","isArray","data","map","forEach","u","id","Number","userId","fetchPredictions","_res$data","fetchAll","Promise","all","err","console","error","prettyParam","param","formatDateTime","iso","d","Date","isNaN","getTime","toLocaleString","riskClass","riskText","String","toLowerCase","replace","getUnitByParameter","p","includes","formatPredictedValue","value","undefined","unit","getUserInfo","clientId","ownerId","name","email","filtered","q","trim","list","filter","user","matchesSearch","city","parameter","disaster_risk","matchesTimeframe","timeframe","matchesRisk","sort","a","b","da","createdAt","db","safeText","v","toDataUrl","imgSrc","resolve","reject","img","Image","crossOrigin","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toDataURL","onerror","src","downloadPredictionPDF","doc","pageW","internal","pageSize","getWidth","pageH","getHeight","margin","darkBg","accentBlue","accentGreen","softWhite","setFillColor","rect","logoDataUrl","addImage","setTextColor","setFont","setFontSize","text","align","cardX","cardY","cardW","cardH","setDrawColor","setLineWidth","labelX","valueX","y","rows","min_or_max","predicted_value","label","msgY","forecast_message","msgLines","splitTextToSize","length","forecast_plot","imgData","plotH","addPage","safeCity","save","now","e","openPlotModal","closePlotModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","alt","placeholder","onChange","target","title","onClick","style","fontSize","marginTop","disabled","_id","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/Assignments/Nadil/Final/Climatrix_SL/react_frontend/src/pages/admin/AdminPredictionHistory.js"],"sourcesContent":["import axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { FaChartBar, FaDownload, FaSyncAlt, FaTimes } from \"react-icons/fa\";\nimport logo from \"../../assets/logo.png\";\nimport Footer from \"../../components/Footer\";\n\nconst API_BASE = \"http://localhost:5001\";\nconst API_PREFIX = \"/api\";\nconst API = axios.create({ baseURL: API_BASE });\n\nconst PredictionHistory = () => {\n  // predictions\n  const [predictions, setPredictions] = useState([]);\n\n  // ✅ users (for mapping userId -> name/email)\n  const [users, setUsers] = useState([]);\n  const [userMap, setUserMap] = useState({}); // { [userId]: userObj }\n\n  const [loading, setLoading] = useState(false);\n  const [alert, setAlert] = useState({ type: \"\", message: \"\" });\n\n  // UI filters\n  const [search, setSearch] = useState(\"\");\n  const [timeframeFilter, setTimeframeFilter] = useState(\"all\");\n  const [riskFilter, setRiskFilter] = useState(\"all\");\n\n  // sort filter\n  const [sortOrder, setSortOrder] = useState(\"latest\"); // latest | oldest\n\n  // plot modal\n  const [showPlot, setShowPlot] = useState(false);\n  const [selectedPrediction, setSelectedPrediction] = useState(null);\n\n  // Alert timeout\n  useEffect(() => {\n    if (alert.message) {\n      const timer = setTimeout(() => setAlert({ type: \"\", message: \"\" }), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [alert]);\n\n  // =========================\n  // Fetch users + predictions\n  // =========================\n  const fetchUsers = async () => {\n    // same endpoint used in UserManagement\n    const res = await API.get(`${API_PREFIX}/users`);\n    const arr = Array.isArray(res.data) ? res.data : [];\n    setUsers(arr);\n\n    // build map userId -> user\n    const map = {};\n    arr.forEach((u) => {\n      const id = Number(u.userId);\n      if (id) map[id] = u;\n    });\n    setUserMap(map);\n  };\n\n  const fetchPredictions = async () => {\n    // admin fetch all\n    const res = await API.get(`${API_PREFIX}/predictions`);\n    const arr = Array.isArray(res.data)\n      ? res.data\n      : Array.isArray(res.data?.predictions)\n      ? res.data.predictions\n      : [];\n    setPredictions(arr);\n  };\n\n  const fetchAll = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([fetchUsers(), fetchPredictions()]);\n    } catch (err) {\n      console.error(err);\n      setAlert({ type: \"error\", message: \"Failed to load prediction history\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchAll();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // =========================\n  // Helpers\n  // =========================\n  const prettyParam = (param) => {\n    if (param === \"rain_sum\") return \"Rainfall\";\n    if (param === \"windspeed_10m_max\") return \"Wind Speed\";\n    if (param === \"windgusts_10m_max\") return \"Wind Gusts\";\n    return param;\n  };\n\n  const formatDateTime = (iso) => {\n    if (!iso) return \"—\";\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) return \"—\";\n    return d.toLocaleString();\n  };\n\n  const riskClass = (riskText) =>\n    `risk-${String(riskText || \"\").toLowerCase().replace(/\\s+/g, \"-\")}`;\n\n  const getUnitByParameter = (param) => {\n    const p = String(param || \"\").toLowerCase();\n    if (p.includes(\"rain\") || p === \"rain_sum\") return \"mm\";\n    if (p.includes(\"gust\") || p === \"windgusts_10m_max\") return \"km/h\";\n    if (p.includes(\"wind\") || p === \"windspeed_10m_max\") return \"km/h\";\n    return \"\";\n  };\n\n  const formatPredictedValue = (value, param) => {\n    if (value === null || value === undefined || value === \"\") return \"—\";\n    const unit = getUnitByParameter(param);\n    return unit ? `${value} ${unit}` : String(value);\n  };\n\n  // ✅ user info from prediction.userId using the map\n  const getUserInfo = (p) => {\n    const id =\n      Number(p?.userId) ||\n      Number(p?.clientId) ||\n      Number(p?.ownerId) ||\n      0;\n\n    const u = userMap[id];\n\n    return {\n      userId: id || \"—\",\n      name: u?.name || \"Unknown User\",\n      email: u?.email || \"—\",\n    };\n  };\n\n  // =========================\n  // Filter + sort list\n  // =========================\n  const filtered = useMemo(() => {\n    const q = search.trim().toLowerCase();\n\n    const list = predictions.filter((p) => {\n      const user = getUserInfo(p);\n\n      const matchesSearch =\n        !q ||\n        `${p.city} ${p.parameter} ${p.disaster_risk} ${user.userId} ${user.name} ${user.email}`\n          .toLowerCase()\n          .includes(q);\n\n      const matchesTimeframe =\n        timeframeFilter === \"all\" || p.timeframe === timeframeFilter;\n\n      const matchesRisk =\n        riskFilter === \"all\" || p.disaster_risk === riskFilter;\n\n      return matchesSearch && matchesTimeframe && matchesRisk;\n    });\n\n    list.sort((a, b) => {\n      const da = new Date(a.createdAt || 0).getTime();\n      const db = new Date(b.createdAt || 0).getTime();\n      return sortOrder === \"latest\" ? db - da : da - db;\n    });\n\n    return list;\n  }, [predictions, search, timeframeFilter, riskFilter, sortOrder, userMap]);\n\n  // =========================\n  // PDF helpers\n  // =========================\n  const safeText = (v) =>\n    v === null || v === undefined || v === \"\" ? \"—\" : String(v);\n\n  const toDataUrl = (imgSrc) =>\n    new Promise((resolve, reject) => {\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n      img.onload = () => {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0);\n        resolve(canvas.toDataURL(\"image/png\"));\n      };\n      img.onerror = reject;\n      img.src = imgSrc;\n    });\n\n  const downloadPredictionPDF = async (p) => {\n    try {\n      const user = getUserInfo(p);\n\n      const doc = new jsPDF(\"p\", \"mm\", \"a4\");\n      const pageW = doc.internal.pageSize.getWidth();\n      const pageH = doc.internal.pageSize.getHeight();\n      const margin = 14;\n\n      const darkBg = [8, 10, 12];\n      const accentBlue = [0, 174, 239];\n      const accentGreen = [164, 198, 57];\n      const softWhite = [235, 235, 235];\n\n      doc.setFillColor(...darkBg);\n      doc.rect(0, 0, pageW, pageH, \"F\");\n\n      doc.setFillColor(...accentBlue);\n      doc.rect(0, 0, pageW * 0.55, 18, \"F\");\n      doc.setFillColor(...accentGreen);\n      doc.rect(pageW * 0.55, 0, pageW * 0.45, 18, \"F\");\n\n      let logoDataUrl = null;\n      try {\n        logoDataUrl = await toDataUrl(logo);\n      } catch {\n        logoDataUrl = null;\n      }\n      if (logoDataUrl) doc.addImage(logoDataUrl, \"PNG\", pageW / 2 - 9, 24, 18, 18);\n\n      doc.setTextColor(...softWhite);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(18);\n      doc.text(\"CLIMATRIX SL\", pageW / 2, 50, { align: \"center\" });\n\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(11);\n      doc.setTextColor(185, 185, 185);\n      doc.text(\"Admin Prediction Report\", pageW / 2, 56, { align: \"center\" });\n\n      const cardX = margin;\n      const cardY = 64;\n      const cardW = pageW - margin * 2;\n      const cardH = 96;\n\n      doc.setFillColor(255, 255, 255, 0.06);\n      doc.rect(cardX, cardY, cardW, cardH, \"F\");\n      doc.setDrawColor(255, 255, 255);\n      doc.setLineWidth(0.2);\n      doc.rect(cardX, cardY, cardW, cardH, \"S\");\n\n      const labelX = cardX + 10;\n      const valueX = cardX + 55;\n      let y = cardY + 16;\n\n      const rows = [\n        [\"Client\", safeText(user.name)],\n        [\"Client Email\", safeText(user.email)],\n        [\"Client ID\", safeText(user.userId)],\n        [\"City\", safeText(p.city)],\n        [\"Parameter\", safeText(prettyParam(p.parameter))],\n        [\"Timeframe\", safeText(p.timeframe)],\n        [\"Mode\", safeText(p.min_or_max)],\n        [\"Value\", safeText(formatPredictedValue(p.predicted_value, p.parameter))],\n        [\"Risk\", safeText(p.disaster_risk)],\n        [\"Date\", safeText(formatDateTime(p.createdAt))],\n      ];\n\n      doc.setFontSize(11);\n      rows.forEach(([label, value]) => {\n        doc.setTextColor(200, 200, 200);\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.text(label, labelX, y);\n\n        doc.setTextColor(240, 240, 240);\n        doc.setFont(\"helvetica\", \"normal\");\n        doc.text(valueX > pageW ? value : value, valueX, y);\n\n        y += 8;\n      });\n\n      let msgY = cardY + cardH + 14;\n\n      doc.setTextColor(240, 240, 240);\n      doc.setFont(\"helvetica\", \"bold\");\n      doc.setFontSize(12);\n      doc.text(\"Forecast Summary\", margin, msgY);\n\n      msgY += 8;\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(10);\n      doc.setTextColor(190, 190, 190);\n\n      const message = safeText(p.forecast_message);\n      const msgLines = doc.splitTextToSize(message, pageW - margin * 2);\n      doc.text(msgLines, margin, msgY);\n\n      msgY += msgLines.length * 5 + 10;\n\n      if (p.forecast_plot) {\n        const imgData = `data:image/png;base64,${p.forecast_plot}`;\n        const plotH = 80;\n\n        if (msgY + plotH > pageH - 22) {\n          doc.addPage();\n          doc.setFillColor(...darkBg);\n          doc.rect(0, 0, pageW, pageH, \"F\");\n          msgY = 20;\n        }\n\n        doc.setFont(\"helvetica\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(240, 240, 240);\n        doc.text(\"Forecast Plot\", margin, msgY);\n\n        msgY += 6;\n\n        doc.setFillColor(255, 255, 255, 0.06);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"F\");\n        doc.setDrawColor(255, 255, 255);\n        doc.setLineWidth(0.2);\n        doc.rect(margin, msgY, pageW - margin * 2, plotH, \"S\");\n\n        doc.addImage(imgData, \"PNG\", margin + 4, msgY + 4, pageW - margin * 2 - 8, plotH - 8);\n      }\n\n      doc.setFont(\"helvetica\", \"normal\");\n      doc.setFontSize(9);\n      doc.setTextColor(160, 160, 160);\n      doc.text(\"Generated by ClimatrixSL • Admin Panel\", pageW / 2, pageH - 10, {\n        align: \"center\",\n      });\n\n      const safeCity = String(p.city || \"prediction\").replace(/\\s+/g, \"_\");\n      doc.save(`ClimatrixSL_Admin_${safeCity}_${Date.now()}.pdf`);\n    } catch (e) {\n      console.error(e);\n      setAlert({\n        type: \"error\",\n        message: \"PDF download failed. Make sure jspdf is installed.\",\n      });\n    }\n  };\n\n  // Plot modal open/close\n  const openPlotModal = (p) => {\n    setSelectedPrediction(p);\n    setShowPlot(true);\n  };\n\n  const closePlotModal = () => {\n    setShowPlot(false);\n    setSelectedPrediction(null);\n  };\n\n  return (\n    <div className=\"history-page d-flex flex-column\">\n      {/* Alerts */}\n      {alert.message && (\n        <div\n          className={`login-alert ${\n            alert.type === \"error\" ? \"login-alert-error\" : \"login-alert-success\"\n          }`}\n        >\n          {alert.message}\n        </div>\n      )}\n\n      {/* Loading */}\n      {loading && (\n        <div className=\"loading-overlay\">\n          <img src={logo} alt=\"Loading...\" className=\"spinner-logo-large\" />\n        </div>\n      )}\n\n      {/* Content */}\n      <div className=\"history-container flex-grow-1\">\n        {/* Header */}\n        <div className=\"history-hero\">\n          <h1 className=\"history-title\">\n            <span className=\"brand-gradient\">Prediction</span> History\n          </h1>\n        </div>\n\n        {/* Controls */}\n        <div className=\"history-controls glass-panel\">\n          <div className=\"history-controls-row\">\n            <input\n              className=\"form-control glass-input history-search\"\n              placeholder=\"Search by client, city, parameter, or risk...\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n            />\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={timeframeFilter}\n              onChange={(e) => setTimeframeFilter(e.target.value)}\n            >\n              <option value=\"all\">All Timeframes</option>\n              <option value=\"day\">Day</option>\n              <option value=\"week\">Week</option>\n              <option value=\"month\">Month</option>\n            </select>\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={riskFilter}\n              onChange={(e) => setRiskFilter(e.target.value)}\n            >\n              <option value=\"all\">All Risks</option>\n              <option value=\"Low Risk\">Low</option>\n              <option value=\"Moderate Risk\">Moderate</option>\n              <option value=\"High Risk\">High</option>\n            </select>\n\n            <select\n              className=\"form-control glass-input glass-select history-select\"\n              value={sortOrder}\n              onChange={(e) => setSortOrder(e.target.value)}\n              title=\"Sort\"\n            >\n              <option value=\"latest\">Latest</option>\n              <option value=\"oldest\">Oldest</option>\n            </select>\n\n            <button\n              className=\"btn btn-outline-light history-refresh icon-btn\"\n              type=\"button\"\n              onClick={fetchAll}\n              title=\"Refresh\"\n            >\n              <FaSyncAlt />\n            </button>\n          </div>\n\n          <div className=\"history-count text-white-50\">\n            Showing <strong className=\"text-white\">{filtered.length}</strong> results\n          </div>\n        </div>\n\n        {!loading && filtered.length === 0 && (\n          <div className=\"glass-panel history-empty text-center text-white\">\n            <h5 className=\"fw-bold mb-2\">No predictions found</h5>\n            <p className=\"text-white-50 mb-0\">Try changing filters or refresh.</p>\n          </div>\n        )}\n\n        {/* Cards */}\n        <div className=\"history-grid\">\n          {filtered.map((p) => {\n            const user = getUserInfo(p);\n\n            return (\n              <div key={p._id} className=\"history-card\">\n                <div className=\"history-card-top\">\n                  <div>\n                    <h5 className=\"history-card-title\">\n                      {p.city} • {prettyParam(p.parameter)}\n                    </h5>\n\n                    <div className=\"text-white-50\" style={{ fontSize: 13, marginTop: 4 }}>\n                      <b className=\"text-white-50\">Client</b>{\" \"}\n                      <span className=\"text-white\">{user.name}</span>{\" \"}\n                      <span className=\"text-white-50\">({user.email})</span>{\" \"}\n                      <span className=\"text-white-50\">ID {user.userId}</span>\n                    </div>\n\n                    <div className=\"history-card-meta\">\n                      <span className=\"chip\">{p.timeframe}</span>\n                      <span className=\"chip\">{p.min_or_max}</span>\n                      <span className=\"chip chip-strong\">\n                        Value {formatPredictedValue(p.predicted_value, p.parameter)}\n                      </span>\n                      <span className=\"chip chip-date\">{formatDateTime(p.createdAt)}</span>\n                    </div>\n                  </div>\n\n                  <span className={`risk-pill ${riskClass(p.disaster_risk)}`}>\n                    {p.disaster_risk}\n                  </span>\n                </div>\n\n                {p.forecast_message && (\n                  <p className=\"history-message\">\n                    <strong>Message</strong>{\" \"}\n                    <span className=\"text-white-50\">{p.forecast_message}</span>\n                  </p>\n                )}\n\n                <div className=\"history-actions\">\n                  <button\n                    className=\"icon-action-btn\"\n                    title=\"Download PDF\"\n                    type=\"button\"\n                    onClick={() => downloadPredictionPDF(p)}\n                  >\n                    <FaDownload />\n                  </button>\n\n                  <button\n                    className=\"icon-action-btn\"\n                    title=\"View Plot\"\n                    type=\"button\"\n                    disabled={!p.forecast_plot}\n                    onClick={() => openPlotModal(p)}\n                  >\n                    <FaChartBar />\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Plot modal */}\n      {showPlot && selectedPrediction && (\n        <div className=\"history-modal-overlay\" onClick={closePlotModal}>\n          <div className=\"history-modal-glass\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"history-modal-header\">\n              <div>\n                <div className=\"history-modal-title\">\n                  {selectedPrediction.city} • {prettyParam(selectedPrediction.parameter)}\n                </div>\n                <div className=\"history-modal-sub text-white-50\">\n                  {formatDateTime(selectedPrediction.createdAt)}\n                </div>\n              </div>\n\n              <button\n                className=\"history-modal-close\"\n                type=\"button\"\n                onClick={closePlotModal}\n                title=\"Close\"\n              >\n                <FaTimes />\n              </button>\n            </div>\n\n            <div className=\"history-modal-body\">\n              {selectedPrediction.forecast_plot ? (\n                <img\n                  src={`data:image/png;base64,${selectedPrediction.forecast_plot}`}\n                  alt=\"Forecast Plot\"\n                  className=\"history-modal-plot\"\n                />\n              ) : (\n                <div className=\"text-white-50 text-center\">\n                  No plot available for this prediction.\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default PredictionHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}